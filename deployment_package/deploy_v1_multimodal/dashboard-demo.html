<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Solar Dashboard Demo - The Current-See</title>
  <link rel="stylesheet" href="/css/common.css">
  <!-- Include Chart.js for the dashboard graphs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header class="navbar">
    <div class="navbar-brand">
      <a href="/">The Current-See</a>
    </div>
    <nav>
      <ul class="nav-list">
        <li class="nav-item"><a href="/" class="nav-link">Home</a></li>
        <li class="nav-item"><a href="/solar-generator" class="nav-link">Solar Generator</a></li>
        <li class="nav-item"><a href="/dashboard-demo.html" class="nav-link">Dashboard</a></li>
      </ul>
    </nav>
  </header>

  <main class="page-container">
    <div class="container">
      <h1>Your Solar Dashboard</h1>
      <p class="subtitle">Track your solar achievements, scan history, and energy impact.</p>

      <!-- Solar spinner for initial loading -->
      <div class="solar-spinner">
        <div class="solar-spinner-orbit"></div>
        <div class="solar-spinner-sun"></div>
        <div class="solar-spinner-planet solar-spinner-planet-1"></div>
        <div class="solar-spinner-planet solar-spinner-planet-2"></div>
        <div class="solar-spinner-planet solar-spinner-planet-3"></div>
      </div>

      <!-- Dashboard container -->
      <div id="dashboard-container"></div>

      <!-- Share modal container -->
      <div id="share-container"></div>

      <!-- Demo controls -->
      <div class="demo-controls" style="margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.9); border-radius: 10px;">
        <h3>Demo Controls</h3>
        <button id="trigger-achievement" class="solar-pulse-button" style="background: #ffb700; color: white; border: none; padding: 10px 20px; border-radius: 5px; margin: 10px; cursor: pointer;">
          Trigger Achievement
        </button>
        <button id="trigger-scan" style="background: #7bc144; color: white; border: none; padding: 10px 20px; border-radius: 5px; margin: 10px; cursor: pointer;">
          Simulate Product Scan
        </button>
        <button id="toggle-audio" style="background: #4a90e2; color: white; border: none; padding: 10px 20px; border-radius: 5px; margin: 10px; cursor: pointer;">
          Toggle Audio Feedback
        </button>
      </div>
    </div>
  </main>

  <footer>
    <div class="footer-content">
      <div class="footer-info">
        <h3>The Current-See PBC, Inc.</h3>
        <p>A Public Benefit Corporation</p>
        <p>Making the power of the sun accessible to everyone.</p>
      </div>
      <div class="footer-links">
        <h3>Resources</h3>
        <ul>
          <li><a href="/solar-declaration">Solar Declaration</a></li>
          <li><a href="/founders-note">Founder's Note</a></li>
          <li><a href="/whitepapers">White Papers</a></li>
        </ul>
      </div>
      <div class="footer-links">
        <h3>Company</h3>
        <ul>
          <li><a href="/about">About Us</a></li>
          <li><a href="/join">Join</a></li>
          <li><a href="/contact">Contact</a></li>
        </ul>
      </div>
    </div>
    <div class="copyright">
      &copy; 2025 The Current-See PBC, Inc. All rights reserved.
    </div>
  </footer>

  <script src="/js/components/solar-share.js"></script>
  <script src="/js/components/audio-feedback.js"></script>
  <script src="/js/dashboard.js"></script>

  <script>
    // Wait for DOM and resources to load
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize the dashboard
      const dashboard = new SolarDashboard({
        container: '#dashboard-container',
        userId: 1,
        username: 'Terry D. Franklin',
        totalSolar: 5.00
      });

      // Initialize the share modal
      const shareComponent = new SolarShare({
        container: '#share-container',
        user: {
          id: 1,
          name: 'Terry D. Franklin'
        }
      });

      // Initialize audio feedback
      const audioFeedback = new SolarAudioFeedback({
        enableEarnChimes: true,
        enableScanWhisper: true,
        enableUiSounds: true
      });

      // Demo: Trigger achievement button
      document.getElementById('trigger-achievement').addEventListener('click', function() {
        const achievement = shareComponent.triggerAchievement({
          type: 'offset',
          value: (Math.random() * 10 + 5).toFixed(1),
          description: 'Energy offset achievement'
        });

        // Create notification
        createNotification('Achievement Unlocked!', 'You have earned a new solar achievement. Share it with your friends!');
      });

      // Demo: Trigger product scan button
      document.getElementById('trigger-scan').addEventListener('click', function() {
        const scanResult = {
          productName: 'Eco-Friendly LED Light Bulb',
          energyKwh: (Math.random() * 5 + 1).toFixed(2),
          ecoScore: Math.floor(Math.random() * 100),
          city: 'San Francisco',
          country: 'USA',
          timestamp: new Date().toISOString()
        };

        // Dispatch product scan event
        const event = new CustomEvent('product:scanned', {
          detail: scanResult
        });
        document.dispatchEvent(event);

        // Create notification
        createNotification('Product Scanned', `${scanResult.productName} uses ${scanResult.energyKwh} kWh of energy`);

        // Simulate particles
        createParticles();
      });

      // Demo: Toggle audio button
      let audioEnabled = true;
      document.getElementById('toggle-audio').addEventListener('click', function() {
        audioEnabled = !audioEnabled;
        audioFeedback.updateSettings({
          enableEarnChimes: audioEnabled,
          enableScanWhisper: audioEnabled,
          enableUiSounds: audioEnabled
        });
        this.textContent = audioEnabled ? 'Disable Audio' : 'Enable Audio';
      });

      // Hide spinner after loading
      setTimeout(() => {
        document.querySelector('.solar-spinner').style.display = 'none';
      }, 2000);

      // Helper: Create notification
      function createNotification(title, message) {
        const notification = document.createElement('div');
        notification.className = 'solar-notification';
        notification.innerHTML = `
          <div class="solar-notification-title">${title}</div>
          <div class="solar-notification-message">${mess
  <!-- HEADER_PLACEHOLDER -->
  age}</div>
        `;
        document.body.appendChild(notification);

        // Remove after animation completes
        setTimeout(() => {
          notification.remove();
        }, 5000);
      }

      // Helper: Create particle effect
      function createParticles() {
        const particleContainer = document.querySelector('.solar-token-particle-area') || 
                                 createParticleContainer();
        
        for (let i = 0; i < 10; i++) {
          setTimeout(() => {
            const particle = document.createElement('div');
            particle.className = 'solar-token-particle';
            
            // Random horizontal end position
            const xEnd = (Math.random() * 60 - 30);
            particle.style.setProperty('--x-end', `${xEnd}px`);
            
            // Random starting position
            particle.style.left = `${Math.random() * 80 + 10}%`;
            
            particleContainer.appendChild(particle);
            
            // Remove after animation completes
            setTimeout(() => {
              particle.remove();
            }, 5000);
          }, i * 100);
        }
      }

      function createParticleContainer() {
        const container = document.createElement('div');
        container.className = 'solar-token-particle-area';
        document.body.appendChild(container);
        return container;
      }
    });
  </script>

<!-- FOOTER_PLACEHOLDER -->

</body>
</html>