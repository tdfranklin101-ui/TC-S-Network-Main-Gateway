<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Current-See</title>
  <link rel="stylesheet" href="/css/common.css">
  <link rel="stylesheet" href="/css/components/language-selector.css">
  <link rel="stylesheet" href="/css/solar-counter.css">
  <link rel="stylesheet" href="/css/global-solar-counter.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="wrapper">
    <!-- HEADER_PLACEHOLDER -->

    <main>
      <!-- Hero Section with Solar Ray Watermark -->
      <section class="hero-solar">
        <div class="container">
          <div class="solar-counter-header">
            <img src="/img/solar-conversion-icon.svg" alt="Solar Conversion" class="solar-app-icon" onerror="this.src='/img/solar-icon-default.svg'; this.onerror=null;">
            <div class="solar-counter-title">
              <h1>Welcome to The Current-See</h1>
              <div class="pulse-dot"></div>
            </div>
          </div>
          <p>Empowering a Planet of Billionaires with Solar Currency</p>
          <div class="cta-buttons">
            <a href="/wallet.html" class="btn-primary">My Solar</a>
            <a href="/declaration.html" class="btn-secondary">Solar Declaration</a>
            <a href="/founder_note.html" class="btn-secondary">Founder's Note</a>
            <a href="/whitepapers.html" class="btn-secondary">White Papers</a>
            <a href="/business_plan.html" class="btn-secondary">Business Plan</a>
          </div>
          
          <!-- Feature Links Box -->
          <div class="features-container" style="margin: 20px 0; max-width: 600px; background: rgba(255, 255, 255, 0.9); border-radius: 10px; padding: 20px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);">
            <h3 style="margin-top: 0; color: #0057B8; font-size: 1.5rem;">Join The Current-See Network</h3>
            
            <p style="margin-bottom: 20px; color: #444; font-size: 16px;">
              Joining is as easy as clicking the wallet link below and registering in the TC-S Wallet app.
            </p>
            
            <div class="feature-links" style="display: flex; flex-direction: column; gap: 15px;">
              <!-- Wallet Link -->
              <a href="https://cross-platform-mobile-tdfranklin101.replit.app/welcome-orientation.html" style="display: flex; align-items: center; text-decoration: none; padding: 12px; border-radius: 8px; background: linear-gradient(to right, rgba(123, 193, 68, 0.1), rgba(0, 87, 184, 0.1)); border: 1px solid rgba(123, 193, 68, 0.3); transition: all 0.3s ease;">
                <div style="background: linear-gradient(to right, #7bc144, #0057B8); width: 40px; height: 40px; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin-right: 15px;">
                  <span style="color: white; font-weight: bold;">1</span>
                </div>
                <div style="flex: 1;">
                  <h4 style="margin: 0 0 5px 0; color: #0057B8;">TC-S AI Wallet</h4>
                  <p style="margin: 0; color: #555; font-size: 14px;">Join the network and start getting SOLARs</p>
                </div>
                <span style="color: #0057B8; font-weight: bold;">→</span>
              </a>
              
              <!-- Book Link -->
              <a href="https://books2read.com/u/4jx87l" style="display: flex; align-items: center; text-decoration: none; padding: 12px; border-radius: 8px; background: linear-gradient(to right, rgba(123, 193, 68, 0.1), rgba(0, 87, 184, 0.1)); border: 1px solid rgba(123, 193, 68, 0.3); transition: all 0.3s ease;">
                <div style="background: linear-gradient(to right, #7bc144, #0057B8); width: 40px; height: 40px; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin-right: 15px;">
                  <span style="color: white; font-weight: bold;">2</span>
                </div>
                <div style="flex: 1;">
                  <h4 style="margin: 0 0 5px 0; color: #0057B8;">The Solar Standard</h4>
                  <p style="margin: 0; color: #555; font-size: 14px;">Read our book on the Currency for Abundance</p>
                </div>
                <span style="color: #0057B8; font-weight: bold;">→</span>
              </a>
              
              <!-- Podcast Link -->
              <a href="https://youtu.be/FUXafe7HuTg?si=N3hLi6sYOaHQGCDI" style="display: flex; align-items: center; text-decoration: none; padding: 12px; border-radius: 8px; background: linear-gradient(to right, rgba(123, 193, 68, 0.1), rgba(0, 87, 184, 0.1)); border: 1px solid rgba(123, 193, 68, 0.3); transition: all 0.3s ease;">
                <div style="background: linear-gradient(to right, #7bc144, #0057B8); width: 40px; height: 40px; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin-right: 15px;">
                  <span style="color: white; font-weight: bold;">3</span>
                </div>
                <div style="flex: 1;">
                  <h4 style="margin: 0 0 5px 0; color: #0057B8;">Podcast Discussion</h4>
                  <p style="margin: 0; color: #555; font-size: 14px;">Listen to our in-depth discussion about the Solar Standard</p>
                </div>
                <span style="color: #0057B8; font-weight: bold;">→</span>
              </a>
            </div>
          </div>
        </div>
      </section>

      <!-- Solar Generator Section -->
      <section class="solar-generator-section">
        <div class="container">
          <h2>Solar Generator</h2>
          <p class="section-subtitle">Powered by Solar-Conversion App</p>
          <div class="solar-counter-container">
            <div class="solar-counter-header">
              <img src="/img/solar-conversion-icon.svg" alt="Solar Conversion" class="solar-app-icon" onerror="this.src='/img/solar-icon-default.svg'; this.onerror=null;">
              <div class="solar-counter-title">
                <h3>Live Solar Generation</h3>
                <div class="pulse-dot"></div>
              </div>
            </div>
            <div class="counter-row">
              <div class="counter-label">Energy Generated Since April 7, 2025:</div>
              <div id="energy-display" class="counter-value odometer-value">0.000000</div> <span class="counter-unit">MkWh</span>
            </div>
            <div class="counter-row">
              <div class="counter-label">Value Created:</div>
              <div id="money-display" class="counter-value odometer-value">$0</div>
            </div>
            <div class="counter-info" id="kwh-rate-display">
              1 Solar = 4,913 kWh (based on 1% of Earth's solar input divided among 8.5B people)
            </div>
          </div>
          <div class="view-all-button">
            <a href="/solar-generator.html" class="btn-secondary">View Full Solar Generator</a>
          </div>
        </div>
      </section>

      <!-- Members Section -->
      <section class="members-section sun-ray-watermark bg-gradient-subtle">
        <div class="container">
          <div class="content-overlay">
            <h2>Members Worldwide</h2>
            <div class="member-count" id="member-count">2</div>
            <p>Join the growing community of solar-powered individuals</p>
          </div>
        </div>
      </section>

      <!-- Global Solar Counter Section -->
      <section class="global-solar-section sun-ray-watermark bg-gradient-solar">
        <div class="container">
          <div class="content-overlay">
            <h2 class="text-center">LIVE Solar Generation</h2>
            
            <div class="global-counter-container">
              <div class="global-counter-row">
                <div class="global-counter-label">Total SOLAR Generated Since April 7, 2025:</div>
                <div class="global-counter-value"><span id="global-solar-count">0.0000</span></div>
              </div>
              
              <div class="global-counter-row">
                <div class="global-counter-label">Energy Generated:</div>
                <div class="global-counter-value"><span id="global-energy-count">0.000000</span> MkWh</div>
              </div>
              
              <div class="global-counter-row">
                <div class="global-counter-label">Value Created:</div>
                <div class="global-counter-value"><span id="global-value-count">$0.00</span></div>
              </div>
              
              <div class="global-counter-info">
                1 Solar = 4,913 kWh (based on 1% of Earth's solar input divided among 8.5B people)
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Sections removed and consolidated into feature links at the top -->

      <!-- Merchandise Section -->
      <section class="merchandise-section sun-ray-watermark bg-gradient-solar">
        <div class="container">
          <div class="content-overlay">
            <h2>Merchandise</h2>
            <p>Support our mission by purchasing exclusive Current-See branded merchandise.</p>
            <div class="shop-button">
              <a href="/merch.html" class="btn-primary">Shop Now</a>
            </div>
          </div>
        </div>
      </section>

      <!-- My Solar Section -->
      <section class="my-solar-section sun-ray-watermark bg-gradient-wallet">
        <div class="container">
          <div class="content-overlay">
            <h2>My Solar</h2>
            <p>Download the TC-S Wallet app to receive daily solar distributions and track your growing solar balance.</p>
            <div class="join-today-button">
              <a href="https://cross-platform-mobile-tdfranklin101.replit.app/welcome-orientation.html" class="btn-primary">Get the Wallet</a>
            </div>
          </div>
        </div>
      </section>

      <!-- Public Members Log -->
      <section class="members-log-section bg-gradient-subtle">
        <div class="container">
          <h2>Public Members Log</h2>
          <div id="public-members-log"></div>
        </div>
      </section>
    </main>

    <!-- FOOTER_PLACEHOLDER -->
  </div>

  <!-- Mobile Menu Script -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
      const mobileNav = document.querySelector('.mobile-nav');
      
      if (mobileMenuToggle && mobileNav) {
        mobileMenuToggle.addEventListener('click', () => {
          mobileMenuToggle.classList.toggle('open');
          mobileNav.classList.toggle('mobile-nav-active');
        });
      }
    });
  </script>

  <!-- Real-Time Solar Counter Script -->
  <script src="/js/real_time_solar_counter.js"></script>
  
  <!-- Global Solar Counter Script -->
  <script src="/js/global-solar-counter.js"></script>

  <!-- Public Members Log Script -->
  <!-- Include embedded members data first so it's available to the members log script -->
  <script src="/embedded-members?v=20250511"></script>
  <script src="/js/public-members-log.js?v=20250511"></script>
  
  <!-- Voice Assistant Script -->
  <script src="/js/voice-assistant.js"></script>

  <!-- Language Translator -->
  <script src="/js/language-translator.js"></script>
  
  <!-- Join Form Submission Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const joinForm = document.getElementById('quick-join-form');
      const successMessage = document.getElementById('join-success-message');
      const errorMessage = document.getElementById('join-error-message');
      const errorDetails = document.getElementById('error-details');
      
      if (joinForm) {
        joinForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          // Get form data
          const nameInput = document.getElementById('join-name');
          const emailInput = document.getElementById('join-email');
          
          if (!nameInput.value || !emailInput.value) {
            showError('Please fill in all fields');
            return;
          }
          
          // Hide previous messages
          successMessage.style.display = 'none';
          errorMessage.style.display = 'none';
          
          // Prepare form data
          const formData = {
            name: nameInput.value,
            email: emailInput.value
          };
          
          // Show loading state on button
          const submitButton = joinForm.querySelector('button[type="submit"]');
          const originalButtonText = submitButton.innerHTML;
          submitButton.innerHTML = 'Processing...';
          submitButton.disabled = true;
          
          // Send API request
          fetch('/api/signup', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(formData)
          })
          .then(response => {
            if (!response.ok) {
              return response.json().then(data => {
                throw new Error(data.error || 'Registration failed');
              });
            }
            return response.json();
          })
          .then(data => {
            // Success
            showSuccess();
            joinForm.reset();
            
            // Update member count immediately
            if (data.totalMembers && typeof window.refreshMemberCount === 'function') {
              // Use the dedicated function if available
              window.refreshMemberCount();
            } else {
              // Fallback to manual update
              const memberCountElement = document.getElementById('member-count');
              if (memberCountElement && data.member) {
                // Get current count as a number
                const currentCount = parseInt(memberCountElement.textContent || '0', 10);
                // Add 1 or set to the total number if we have it
                memberCountElement.textContent = data.totalMembers || (currentCount + 1);
              }
            }
            
            // Refresh the members log after successful signup
            setTimeout(() => {
              if (typeof loadMembers === 'function') {
                loadMembers();
              } else {
                location.reload();
              }
            }, 2000);
          })
          .catch(error => {
            showError(error.message || 'Failed to join. Please try again.');
          })
          .finally(() => {
            // Reset button state
            submitButton.innerHTML = originalButtonText;
            submitButton.disabled = false;
          });
        });
      }
      
      function showSuccess() {
        successMessage.style.display = 'block';
        errorMessage.style.display = 'none';
        // Scroll to the success message
        successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
      
      function showError(message) {
        errorMessage.style.display = 'block';
        successMessage.style.display = 'none';
        errorDetails.textContent = message || 'Please try again.';
        // Scroll to the error message
        errorMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    });
  </script>
</body>
</html>