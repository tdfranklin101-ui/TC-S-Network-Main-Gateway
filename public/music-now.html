<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Now - Monazite Catalog</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 30px;
            border: 2px solid #ff8c00;
        }
        
        h1 {
            text-align: center;
            color: #ff8c00;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .player-section {
            background: linear-gradient(135deg, rgba(255, 140, 0, 0.1), rgba(218, 165, 32, 0.1));
            border: 2px solid rgba(255, 140, 0, 0.3);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
        }
        
        .track-list {
            margin-bottom: 20px;
        }
        
        .track-button {
            display: block;
            width: 100%;
            padding: 12px 20px;
            margin: 8px 0;
            background: linear-gradient(135deg, #ff8c00, #ff6600);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .track-button:hover {
            background: linear-gradient(135deg, #ff6600, #ff4400);
            transform: translateY(-2px);
        }
        
        .track-button:active {
            transform: translateY(0);
        }
        
        .audio-player {
            width: 100%;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .now-playing {
            text-align: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 8px;
            color: #ff8c00;
            font-weight: bold;
            font-size: 18px;
            margin: 15px 0;
            border: 2px solid #ff8c00;
            display: none;
        }
        
        .back-link {
            text-align: center;
            margin-top: 20px;
        }
        
        .back-link a {
            color: #ff8c00;
            text-decoration: none;
            font-size: 18px;
            font-weight: bold;
            padding: 10px 20px;
            border: 2px solid #ff8c00;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .back-link a:hover {
            background: #ff8c00;
            color: black;
        }
        
        .track-button.locked {
            background: linear-gradient(135deg, #666, #444);
            cursor: not-allowed;
            opacity: 0.7;
            position: relative;
        }
        
        .track-button.locked::after {
            content: 'üîí';
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .track-button.locked:hover {
            background: linear-gradient(135deg, #666, #444);
            transform: none;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
        }
        
        .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            margin: 10% auto;
            padding: 30px;
            border: 3px solid #ff8c00;
            border-radius: 15px;
            width: 80%;
            max-width: 500px;
            text-align: center;
            color: white;
        }
        
        .modal h2 {
            color: #ff8c00;
            margin-bottom: 20px;
        }
        
        .modal p {
            margin-bottom: 20px;
            font-size: 16px;
            line-height: 1.5;
        }
        
        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
        }
        
        .modal-button {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .wallet-button {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }
        
        .wallet-button:hover {
            background: linear-gradient(135deg, #20c997, #17a2b8);
            transform: scale(1.05);
        }
        
        .close-button {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
        }
        
        .close-button:hover {
            background: linear-gradient(135deg, #c82333, #bd2130);
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Monazite Album Cover -->
        <div style="text-align: center; margin-bottom: 20px;">
            <img src="/IMG_1377_1756882868979.jpeg" alt="Monazite Album Cover" style="width: 250px; height: auto; border-radius: 15px; box-shadow: 0 8px 16px rgba(0,0,0,0.5); border: 3px solid #ff8c00;">
        </div>
        
        <h1>üéµ MONAZITE MUSIC NOW COLLECTION üéµ</h1>
        <p style="text-align: center; font-size: 18px; margin-bottom: 30px;">
            Complete Catalog - 19 Tracks + 1 Bonus Market Track
        </p>
        
        <div class="player-section">
            <div class="track-list">
                <button class="track-button" data-testid="track-button-0" onclick="playTrack(0)">üî• 'Ternal Flame - Longevity Manifesto</button>
                
                <!-- 'Ternal Flame Graphic -->
                <div style="text-align: center; margin: 10px 0;">
                  <img src="IMG_1472_1757436204528.jpeg" alt="'Ternal Flame - Longevity Manifesto" style="width: 200px; height: auto; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.3); border: 2px solid #ff8c00;">
                  <div style="margin-top: 8px; padding: 8px; background: rgba(255,140,0,0.1); border: 1px solid rgba(255,140,0,0.3); border-radius: 8px;">
                    <span style="color: #ff8c00; font-style: italic;">üéµ Song 19 - Latest Addition</span>
                  </div>
                </div>
                
                <button class="track-button" data-testid="track-button-1" onclick="playTrack(1)">‚≠ê David Boyeez Hair</button>
                
                <!-- Bowie Graphics for David Boyeez Hair -->
                <div style="display: flex; gap: 15px; margin: 10px 0 20px 0; justify-content: center;">
                  <img src="/04AA9BAB-9CBA-43ED-A1B5-E4674F850D59_1756066851257.png" alt="Changes" style="width: 100px; height: auto; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">
                  <img src="/5906466E-3563-443A-8273-19DB5D24F116_1756066851257.png" alt="Ch-Ch-Ch-Changes" style="width: 100px; height: auto; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">
                </div>
                <button class="track-button" data-testid="track-button-2" onclick="playTrack(2)">üêä Swampy Boogie Nights (Cajun Crawler)</button>
                <button class="track-button" data-testid="track-button-3" onclick="playTrack(3)">üéµ The Heart is a Mule (by Robert Hunter, Allen Ginsberg and William Burroughs)</button>
                <button class="track-button" data-testid="track-button-4" onclick="playTrack(4)">üé∂ A Solar Day (groovin)</button>
                <button class="track-button" data-testid="track-button-5" onclick="playTrack(5)">üéº A Solar Day (moovin)</button>
                <button class="track-button" data-testid="track-button-6" onclick="playTrack(6)">üé∫ Break Time Blues Rhapsody (By Kid Solar)</button>
                <button class="track-button" data-testid="track-button-7" onclick="playTrack(7)">‚≠ê Starlight Forever</button>
                <button class="track-button" data-testid="track-button-8" onclick="playTrack(8)">üí° Light It From Within</button>
                <button class="track-button" data-testid="track-button-9" onclick="playTrack(9)">üåô Moonshine in St Kitts (By Bowie, Jagger, Lennon)</button>
                <button class="track-button" data-testid="track-button-10" onclick="playTrack(10)">‚ö° Solar Tempest Symphony (By JMF)</button>
                <button class="track-button" data-testid="track-button-11" onclick="playTrack(11)">üî© Steel In His Soul</button>
                <button class="track-button" data-testid="track-button-12" onclick="playTrack(12)">üí¨ We Said So</button>
                <button class="track-button" data-testid="track-button-13" onclick="playTrack(13)">üóø Funky Voodoo (Blues Jam)</button>
                <button class="track-button" data-testid="track-button-14" onclick="playTrack(14)">üóø Green and Blue (Rock)</button>
                <button class="track-button" data-testid="track-button-15" onclick="playTrack(15)">üóø Green and Blue (EDM)</button>
                <button class="track-button" data-testid="track-button-16" onclick="playTrack(16)">üóø Lady Voodoo (Folk Yah)</button>
                <button class="track-button" data-testid="track-button-17" onclick="playTrack(17)">üóø Lady Voodoo (Crying)</button>
                <button class="track-button" data-testid="track-button-18" onclick="playTrack(18)">üóø Rasta Lady Voodoo</button>
                
                <!-- Bonus Market Track -->
                <div style="margin: 20px 0; padding: 15px; background: rgba(255,215,0,0.1); border: 2px solid #ffd700; border-radius: 10px;">
                    <div style="text-align: center; margin-bottom: 10px;">
                        <span style="color: #ffd700; font-weight: bold; font-size: 16px;">üíé BONUS MARKET EXCLUSIVE üíé</span>
                    </div>
                    <button class="track-button" data-testid="track-button-bonus" onclick="playTrack(19)" style="background: linear-gradient(135deg, #ffd700, #ffb300); color: #1a1a2e;">‚ùÑÔ∏è Snowmancer One (Market Exclusive)</button>
                    <div style="text-align: center; margin-top: 8px; font-size: 14px; color: #ffd700;">
                        Available only through Solar trading at wallet.market
                    </div>
                </div>
            </div>
            
            <!-- Play Album Button -->
            <div style="text-align: center; margin: 20px 0;">
                <button onclick="playAlbum()" id="albumButton" data-testid="button-play-album" style="padding: 15px 30px; background: linear-gradient(135deg, #ff6600, #ff4400); border: none; border-radius: 10px; color: white; font-size: 18px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">
                    üéµ Play Album (Random, No Repeats)
                </button>
            </div>

            <div class="now-playing" id="nowPlaying">
                üé∂ Now Playing: <span id="trackName">Select a track</span>
            </div>
            
            <audio id="audioPlayer" class="audio-player" data-testid="audio-player" controls preload="none">
                Your browser does not support the audio element.
            </audio>
        </div>
        
        <div class="back-link">
            <a href="/">‚Üê Back to Current-See Platform</a>
        </div>
    </div>

    <!-- Wallet Modal -->
    <div id="walletModal" class="modal">
        <div class="modal-content">
            <h2>üîí Track Locked</h2>
            <p>You've already enjoyed your free preview of this track!</p>
            <p>To continue listening or download, trade your <strong>Solar tokens</strong> at wallet.market:</p>
            <div style="background: rgba(255,140,0,0.1); padding: 15px; border-radius: 10px; margin: 20px 0; border: 2px solid #ff8c00;">
                <p style="margin: 0; color: #ff8c00; font-weight: bold;">üí∞ Track Cost: S0.1000 Solar</p>
                <p style="margin: 5px 0 0 0; font-size: 14px;">Full access for listening & download</p>
            </div>
            <div class="modal-buttons">
                <button class="modal-button wallet-button" data-testid="button-trade-solar" onclick="goToWallet()">üöÄ Trade Solar at wallet.market</button>
                <button class="modal-button close-button" data-testid="button-close-modal" onclick="closeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // MP3 track URLs
        const tracks = [
            'https://storage.aisongmaker.io/audio/4a839c86-40d9-4272-989b-7a512184ddb6.mp3', // 'Ternal Flame - Longevity Manifesto
            'https://storage.aisongmaker.io/audio/9b2b12e4-8626-41e4-b9e4-c7a563e40f97.mp3', // David Boyeez Hair
            'https://storage.aisongmaker.io/audio/015092c3-f687-4a01-9a81-dad42f2adce9.mp3', // Swampy Boogie Nights  
            'https://storage.aisongmaker.io/audio/10db8911-0b74-4675-ba62-02182c1d7f6b.mp3', // The Heart is a Mule
            'https://storage.aisongmaker.io/audio/418add3e-c1a5-4a76-b361-14d6a11794fe.mp3', // A Solar Day (groovin)
            'https://storage.aisongmaker.io/audio/a2647129-991f-4105-aad2-e45210005bef.mp3', // A Solar Day (moovin)
            'https://storage.aisongmaker.io/audio/09de8c9d-25a7-4b38-a6bd-c27b7de4629e.mp3', // Break Time Blues Rhapsody
            'https://storage.aisongmaker.io/audio/c51b1f15-eff7-41fb-b778-b1b9d914ce3a.mp3', // Starlight Forever
            'https://storage.aisongmaker.io/audio/ab1612d5-ccf4-4b4a-ab92-21b77bebdd46.mp3', // Light It From Within
            'https://storage.aisongmaker.io/audio/675d577c-5ab9-45c9-b9d5-d4362f6bcc12.mp3', // Moonshine in St Kitts
            'https://storage.aisongmaker.io/audio/94088af1-8318-401a-b277-b79fbbdb7475.mp3', // Solar Tempest Symphony
            'https://storage.aisongmaker.io/audio/cb58c04e-fc7b-448a-a9e5-a642e168cacd.mp3', // Steel In His Soul
            'https://storage.aisongmaker.io/audio/11802549-7cf8-4d4c-a708-44f04804f2ab.mp3', // We Said So
            'https://storage.aisongmaker.io/audio/19d37c35-dc0b-4686-8bd7-71992f925670.mp3', // Funky Voodoo
            'https://storage.aisongmaker.io/audio/255be09f-c09a-4d9a-8dbc-3c3ba65e9204.mp3', // Green and Blue (Rock)
            'https://storage.aisongmaker.io/audio/01e05fb6-a7ac-4dd3-9500-00bb46625ef1.mp3', // Green and Blue (EDM)
            'https://storage.aisongmaker.io/audio/49fc3427-e775-47f0-b5ea-8903006b07a0.mp3', // Lady Voodoo (Folk)
            'https://storage.aisongmaker.io/audio/b2001c35-620a-4893-b046-4de20ad11422.mp3', // Lady Voodoo (Crying)
            'https://storage.aisongmaker.io/audio/7abf4dac-2b12-434a-8d59-c115f8c54cb9.mp3', // Rasta Lady Voodoo
            'https://storage.aisongmaker.io/audio/b72acaea-72b4-4dc2-8c84-98e0b30a82e3.mp3'  // Snowmancer One (Bonus)
        ];

        const trackNames = [
            'üî• \'Ternal Flame - Longevity Manifesto', '‚≠ê David Boyeez Hair', 'üêä Swampy Boogie Nights (Cajun Crawler)', 
            'üéµ The Heart is a Mule', 'üé∂ A Solar Day (groovin)', 'üéº A Solar Day (moovin)',
            'üé∫ Break Time Blues Rhapsody', '‚≠ê Starlight Forever', 'üí° Light It From Within',
            'üåô Moonshine in St Kitts', '‚ö° Solar Tempest Symphony', 'üî© Steel In His Soul',
            'üí¨ We Said So', 'üóø Funky Voodoo (Blues Jam)', 'üóø Green and Blue (Rock)',
            'üóø Green and Blue (EDM)', 'üóø Lady Voodoo (Folk Yah)', 'üóø Lady Voodoo (Crying)', 
            'üóø Rasta Lady Voodoo',
            '‚ùÑÔ∏è Snowmancer One (Market Exclusive)'
        ];

        // Album playback variables
        let albumMode = false;
        let shuffledTracks = [];
        let currentAlbumIndex = 0;
        
        // Track play history management
        function getPlayHistory() {
            return JSON.parse(localStorage.getItem('monazite_play_history') || '[]');
        }
        
        function markTrackPlayed(index) {
            const history = getPlayHistory();
            if (!history.includes(index)) {
                history.push(index);
                localStorage.setItem('monazite_play_history', JSON.stringify(history));
                updateTrackButtons();
            }
        }
        
        function isTrackPlayed(index) {
            return getPlayHistory().includes(index);
        }
        
        function updateTrackButtons() {
            const buttons = document.querySelectorAll('.track-button');
            buttons.forEach((button, index) => {
                if (isTrackPlayed(index)) {
                    button.classList.add('locked');
                    if (index === 19) {
                        // Bonus track gets special modal
                        button.onclick = () => showBonusTrackModal();
                    } else {
                        // Regular tracks get standard modal
                        button.onclick = () => showWalletModal(index);
                    }
                }
            });
        }
        
        function showWalletModal(index) {
            document.getElementById('walletModal').style.display = 'block';
        }
        
        function showBonusTrackModal() {
            // Show specialized modal for bonus track
            const modal = document.getElementById('walletModal');
            const modalContent = modal.querySelector('.modal-content');
            
            modalContent.innerHTML = `
                <h2>üíé Bonus Track - Market Exclusive</h2>
                <div style="margin: 20px 0;">
                    <h3 style="color: #ffd700; margin-bottom: 15px;">‚ùÑÔ∏è Snowmancer One</h3>
                    <p>This exclusive bonus track is only available through Solar trading!</p>
                    <p>Experience the mystical winter soundscape crafted specially for Solar holders.</p>
                </div>
                <div style="background: rgba(255,215,0,0.1); padding: 15px; border-radius: 10px; margin: 20px 0; border: 2px solid #ffd700;">
                    <p style="margin: 0; color: #ffd700; font-weight: bold;">üí∞ Bonus Track Cost: S0.2500 Solar</p>
                    <p style="margin: 5px 0 0 0; font-size: 14px;">Premium access + download rights</p>
                </div>
                <div class="modal-buttons">
                    <button class="modal-button wallet-button" data-testid="button-trade-solar-bonus" onclick="goToWallet()">üöÄ Trade Solar at wallet.market</button>
                    <button class="modal-button close-button" data-testid="button-close-modal" onclick="closeModal()">Cancel</button>
                </div>
            `;
            
            modal.style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('walletModal').style.display = 'none';
        }
        
        function goToWallet() {
            window.open('https://wallet.market', '_blank');
            closeModal();
        }
        
        // Initialize track button states when page loads
        window.addEventListener('load', updateTrackButtons);

        function playTrack(index) {
            // Check if track was already played
            if (isTrackPlayed(index)) {
                if (index === 19) {
                    // Bonus track gets special modal
                    showBonusTrackModal();
                } else {
                    // Regular tracks get standard modal
                    showWalletModal(index);
                }
                return;
            }
            const player = document.getElementById('audioPlayer');
            const nowPlaying = document.getElementById('nowPlaying');
            const trackName = document.getElementById('trackName');
            
            // Load the track
            player.src = tracks[index];
            player.load();
            
            // Update display
            trackName.textContent = trackNames[index];
            nowPlaying.style.display = 'block';
            
            // Mark track as played after a few seconds of listening
            player.addEventListener('timeupdate', function markAsPlayed() {
                if (player.currentTime > 30) { // After 30 seconds
                    markTrackPlayed(index);
                    player.removeEventListener('timeupdate', markAsPlayed);
                }
            });
            
            // Try to play (may be blocked by autoplay policy)
            player.play().catch(() => {
                // Autoplay blocked - user can use controls
            });
        }

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function playAlbum() {
            const button = document.getElementById('albumButton');
            const player = document.getElementById('audioPlayer');
            
            if (!albumMode) {
                // Start album mode
                albumMode = true;
                shuffledTracks = shuffleArray([...Array(19).keys()]); // [0,1,2...18] shuffled (excluding bonus track)
                currentAlbumIndex = 0;
                button.textContent = '‚èπÔ∏è Stop Album';
                button.style.background = 'linear-gradient(135deg, #dc143c, #b91c3c)';
                
                // Play first track
                playTrack(shuffledTracks[currentAlbumIndex]);
                
                // Set up auto-advance
                player.addEventListener('ended', autoAdvanceTrack);
            } else {
                // Stop album mode
                stopAlbum();
            }
        }

        function stopAlbum() {
            const button = document.getElementById('albumButton');
            const player = document.getElementById('audioPlayer');
            
            albumMode = false;
            button.textContent = 'üéµ Play Album (Random, No Repeats)';
            button.style.background = 'linear-gradient(135deg, #ff6600, #ff4400)';
            
            // Remove event listener
            player.removeEventListener('ended', autoAdvanceTrack);
            player.pause();
        }

        function autoAdvanceTrack() {
            if (!albumMode) return;
            
            currentAlbumIndex++;
            
            if (currentAlbumIndex >= shuffledTracks.length) {
                // Album finished
                stopAlbum();
                const trackName = document.getElementById('trackName');
                trackName.textContent = 'Album Complete! üéâ';
                return;
            }
            
            // Play next track
            setTimeout(() => {
                playTrack(shuffledTracks[currentAlbumIndex]);
            }, 1000); // 1 second gap between tracks
        }
    </script>
</body>
</html>