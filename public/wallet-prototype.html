<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TC-S Wallet Prototype</title>
  
  <!-- SEO Meta Tags -->
  
  
  <!-- Common Styles -->
  <link rel="stylesheet" href="/css/common.css">
  <link rel="stylesheet" href="/css/components/language-selector.css">
  
  <!-- Page-specific styles -->
  <link rel="stylesheet" href="/css/common.css">
<link rel="stylesheet" href="/css/components/language-selector.css">
<style>
  body {
    font-family: system-ui, sans-serif;
    background: #f8fdfc;
    margin: 0;
    padding: 0;
  }
  
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }

  .wallet-box {
    border: 1px solid #ccc;
    padding: 1rem;
    border-radius: 8px;
    margin-bottom: 1.5rem;
    background: #ffffff;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  }

  .title {
    font-size: 1.2rem;
    font-weight: bold;
    color: #003a33;
    margin-bottom: 0.4rem;
  }

  .sub {
    font-size: 0.95rem;
    color: #555;
    margin-bottom: 1rem;
  }

  pre {
    background: #eef7f4;
    padding: 0.8rem;
    border-radius: 6px;
    font-size: 0.9rem;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .btn {
    background: #00aa88;
    color: white;
    border: none;
    padding: 0.8rem 1.2rem;
    font-size: 1rem;
    border-radius: 6px;
    cursor: pointer;
    margin: 0.3rem 0.3rem 0 0;
    display: inline-block;
    width: calc(100% - 1rem);
    max-width: 400px;
  }

  .btn:hover {
    background: #008f72;
  }

  .btn:active {
    transform: scale(0.98);
  }

  .button-row {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  @media screen and (min-width: 600px) {
    .button-row {
      flex-direction: row;
      justify-content: center;
      gap: 0.5rem;
    }

    .btn {
      width: auto;
    }
  }
  </style>

</head>
<body>
  <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Current-See</title>
  
  <!-- SEO Meta Tags -->
  
  
  <!-- Common Styles -->
  <link rel="stylesheet" href="/css/common.css">
  <link rel="stylesheet" href="/css/components/language-selector.css">
  
  <!-- Page-specific styles -->
  
</head>
<body>
  <!-- Common Header -->
<header class="site-header">
  <div class="logo-container">
    <a href="/">
      <picture>
        <source srcset="/img/solar-logo.svg" type="image/svg+xml">
        <img src="/img/solar-logo.png" alt="The Current-See Logo" class="logo-img">
      </picture>
      <div class="logo-text">The Current-See<br>PBC, Inc.</div>
    </a>
  </div>
  <nav class="main-nav">
    <button class="mobile-menu-toggle" aria-label="Toggle navigation menu">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>
    <ul class="nav-items">
      <li><a href="/">Home</a></li>
      <li><a href="/prototype.html">Prototype</a></li>
      <li><a href="/wallet-ai-features.html">My Solar</a></li>
      <li><a href="/declaration.html">Solar Declaration</a></li>
      <li><a href="/founder_note.html">Founder's Note</a></li>
      <li><a href="/whitepapers.html">White Papers</a></li>
      <li><a href="/business_plan.html">Business Plan</a></li>
      <li><a href="/merch.html">Merchandise</a></li>
      <li><a href="/wallet-ai-features.html">Wallet</a></li>
      <li><a href="/ai-assistant-demo.html">AI Assistant</a></li>
      <li><a href="/account-info.html">Account Info</a></li>
      <li><a href="/#join-section" class="join-button">Join</a></li>
    </ul>
    <div id="language-selector" class="language-selector"></div>
  </nav>
</header>

<style>
  /* Header Styles */
  .site-header {
    background: linear-gradient(to right, #F5F5F5, #FFFDF0);
    padding: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    position: relative;
    border-bottom: 3px solid #4caf50;
  }
  
  .logo-container {
    display: flex;
    align-items: center;
  }
  
  .logo-container a {
    display: flex;
    align-items: center;
    text-decoration: none;
    color: #00573B;
  }
  
  .logo-container picture,
  .logo-img {
    height: 50px;
    width: auto;
    margin-right: 1rem;
    display: block;
  }
  
  .logo-text {
    font-size: 1.2rem;
    font-weight: 700;
    line-height: 1.2;
    color: #00573B;
  }
  
  .main-nav {
    display: flex;
    align-items: center;
  }
  
  .nav-items {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
  }
  
  .nav-items li {
    margin-left: 1.5rem;
  }
  
  .nav-items a {
    color: #00573B;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s ease;
    padding: 0.5rem 0;
    position: relative;
  }
  
  .nav-items a:hover {
    color: #FFC107;
  }
  
  .nav-items a::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background-color: #FFC107;
    transition: width 0.3s ease;
  }
  
  .nav-items a:hover::after {
    width: 100%;
  }
  
  /* Special styling for Join button */
  .nav-items a.join-button {
    background-color: #4caf50;
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    transition: background-color 0.3s ease;
  }
  
  .nav-items a.join-button:hover {
    background-color: #45a049;
    color: white;
  }
  
  .nav-items a.join-button::after {
    display: none;
  }
  
  .mobile-menu-toggle {
    display: none;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
  }
  
  .mobile-menu-toggle .bar {
    display: block;
    width: 25px;
    height: 3px;
    background-color: #00573B;
    margin: 5px 0;
    transition: transform 0.3s ease, opacity 0.3s ease;
  }
  
  @media (max-width: 768px) {
    .mobile-menu-toggle {
      display: block;
    }
    
    .nav-items {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background-color: #FFFFFF;
      flex-direction: column;
      padding: 1rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      display: none;
      z-index: 100;
    }
    
    .nav-items.active {
      display: flex;
    }
    
    .nav-items li {
      margin: 0.5rem 0;
    }
  }
</style>

<script>
  // Mobile menu toggle functionality
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
    const navItems = document.querySelector('.nav-items');
    
    if (mobileMenuToggle && navItems) {
      mobileMenuToggle.addEventListener('click', function() {
        navItems.classList.toggle('active');
      });
    }
  });
</script>
  
  <main>
    <!-- Common Header -->
<header class="site-header">
  <div class="logo-container">
    <a href="/">
      <picture>
        <source srcset="/img/solar-logo.svg" type="image/svg+xml">
        <img src="/img/solar-logo.png" alt="The Current-See Logo" class="logo-img">
      </picture>
      <div class="logo-text">The Current-See<br>PBC, Inc.</div>
    </a>
  </div>
  <nav class="main-nav">
    <button class="mobile-menu-toggle" aria-label="Toggle navigation menu">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>
    <ul class="nav-items">
      <li><a href="/">Home</a></li>
      <li><a href="/prototype.html">Prototype</a></li>
      <li><a href="/wallet-ai-features.html">My Solar</a></li>
      <li><a href="/declaration.html">Solar Declaration</a></li>
      <li><a href="/founder_note.html">Founder's Note</a></li>
      <li><a href="/whitepapers.html">White Papers</a></li>
      <li><a href="/business_plan.html">Business Plan</a></li>
      <li><a href="/merch.html">Merchandise</a></li>
      <li><a href="/wallet-ai-features.html">Wallet</a></li>
      <li><a href="/ai-assistant-demo.html">AI Assistant</a></li>
      <li><a href="/account-info.html">Account Info</a></li>
      <li><a href="/#join-section" class="join-button">Join</a></li>
    </ul>
    <div id="language-selector" class="language-selector"></div>
  </nav>
</header>

<style>
  /* Header Styles */
  .site-header {
    background: linear-gradient(to right, #F5F5F5, #FFFDF0);
    padding: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    position: relative;
    border-bottom: 3px solid #4caf50;
  }
  
  .logo-container {
    display: flex;
    align-items: center;
  }
  
  .logo-container a {
    display: flex;
    align-items: center;
    text-decoration: none;
    color: #00573B;
  }
  
  .logo-container picture,
  .logo-img {
    height: 50px;
    width: auto;
    margin-right: 1rem;
    display: block;
  }
  
  .logo-text {
    font-size: 1.2rem;
    font-weight: 700;
    line-height: 1.2;
    color: #00573B;
  }
  
  .main-nav {
    display: flex;
    align-items: center;
  }
  
  .nav-items {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
  }
  
  .nav-items li {
    margin-left: 1.5rem;
  }
  
  .nav-items a {
    color: #00573B;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s ease;
    padding: 0.5rem 0;
    position: relative;
  }
  
  .nav-items a:hover {
    color: #FFC107;
  }
  
  .nav-items a::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background-color: #FFC107;
    transition: width 0.3s ease;
  }
  
  .nav-items a:hover::after {
    width: 100%;
  }
  
  /* Special styling for Join button */
  .nav-items a.join-button {
    background-color: #4caf50;
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    transition: background-color 0.3s ease;
  }
  
  .nav-items a.join-button:hover {
    background-color: #45a049;
    color: white;
  }
  
  .nav-items a.join-button::after {
    display: none;
  }
  
  .mobile-menu-toggle {
    display: none;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
  }
  
  .mobile-menu-toggle .bar {
    display: block;
    width: 25px;
    height: 3px;
    background-color: #00573B;
    margin: 5px 0;
    transition: transform 0.3s ease, opacity 0.3s ease;
  }
  
  @media (max-width: 768px) {
    .mobile-menu-toggle {
      display: block;
    }
    
    .nav-items {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background-color: #FFFFFF;
      flex-direction: column;
      padding: 1rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      display: none;
      z-index: 100;
    }
    
    .nav-items.active {
      display: flex;
    }
    
    .nav-items li {
      margin: 0.5rem 0;
    }
  }
</style>

<script>
  // Mobile menu toggle functionality
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
    const navItems = document.querySelector('.nav-items');
    
    if (mobileMenuToggle && navItems) {
      mobileMenuToggle.addEventListener('click', function() {
        navItems.classList.toggle('active');
      });
    }
  });
</script>
  </main>
  
  <!-- Common Footer -->
<footer class="site-footer">
  <div class="footer-content">
    <div class="footer-section about">
      <h3>The Current-See</h3>
      <p>A revolutionary organization creating a solar-backed economic system for a more equitable world.</p>
      <p>The Current-See PBC, Inc.</p>
      <p><a href="mailto:hello@thecurrentsee.org">hello@thecurrentsee.org</a></p>
    </div>
    
    <div class="footer-section links">
      <h3>Quick Links</h3>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/declaration.html">Solar Declaration</a></li>
        <li><a href="/founder_note.html">Founder's Note</a></li>
        <li><a href="/whitepapers.html">White Papers</a></li>
        <li><a href="/wallet-ai-features.html">Wallet Features</a></li>
      </ul>
    </div>
    
    <div class="footer-section join">
      <h3>Join the Movement</h3>
      <ul>
        <li><a href="/contact-us.html">Contact Us</a></li>
        <li><a href="/#join-section">Sign Up</a></li>
        <li><a href="/wallet-ai-features.html">My Solar</a></li>
        <li><a href="/account-info.html">Account Information</a></li>
      </ul>
    </div>
  </div>
  
  <div class="footer-bottom">
    <p>&copy; 2025 The Current-See PBC, Inc. All rights reserved. <a href="/admin/member-roster.html" style="color: #333; font-size: 0.8em; margin-left: 15px; text-decoration: none;">Admin</a></p>
  </div>
</footer>

<!-- Hidden Google Translate Element -->
<div id="google_translate_element" style="display: none;"></div>

<!-- Language translator script -->
<script src="/js/language-translator-loader.js"></script>

<!-- Voice assistant script -->
<script src="/js/voice-assistant-loader.js"></script>

<style>
  /* Footer Styles */
  .site-footer {
    background-color: #333;
    color: #fff;
    padding: 2rem 0 0 0;
    font-size: 0.9rem;
  }
  
  .footer-content {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }
  
  .footer-section {
    flex: 1;
    margin: 0 1rem 2rem;
    min-width: 200px;
  }
  
  .footer-section h3 {
    color: #FFC107;
    margin-bottom: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 0.5rem;
    font-size: 1.2rem;
  }
  
  .footer-section p {
    line-height: 1.6;
    margin-bottom: 0.7rem;
  }
  
  .footer-section a {
    color: #ADB5BD;
    text-decoration: none;
    transition: color 0.3s ease;
  }
  
  .footer-section a:hover {
    color: #FFC107;
  }
  
  .footer-section ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .footer-section ul li {
    margin-bottom: 0.7rem;
  }
  
  .footer-bottom {
    background-color: #222;
    padding: 1rem 0;
    text-align: center;
    font-size: 0.8rem;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
  }
  
  .footer-bottom p {
    margin: 0;
  }
  
  @media (max-width: 768px) {
    .footer-content {
      flex-direction: column;
    }
    
    .footer-section {
      margin: 0 0 1.5rem;
    }
  }
</style>
  
  <!-- Language Translator -->
  <script src="/js/language-translator.js"></script>
  
  <!-- Page-specific scripts -->
  <script>
  // Mobile menu toggle functionality
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
    const navItems = document.querySelector('.nav-items');
    
    if (mobileMenuToggle && navItems) {
      mobileMenuToggle.addEventListener('click', function() {
        navItems.classList.toggle('active');
      });
    }
  });
</script>

</body>
</html>
  
  <main>
    <!-- Common Header -->
<header class="site-header">
  <div class="logo-container">
    <a href="/">
      <picture>
        <source srcset="/img/solar-logo.svg" type="image/svg+xml">
        <img src="/img/solar-logo.png" alt="The Current-See Logo" class="logo-img">
      </picture>
      <div class="logo-text">The Current-See<br>PBC, Inc.</div>
    </a>
  </div>
  <nav class="main-nav">
    <button class="mobile-menu-toggle" aria-label="Toggle navigation menu">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>
    <ul class="nav-items">
      <li><a href="/">Home</a></li>
      <li><a href="/prototype.html">Prototype</a></li>
      <li><a href="/wallet-ai-features.html">My Solar</a></li>
      <li><a href="/declaration.html">Solar Declaration</a></li>
      <li><a href="/founder_note.html">Founder's Note</a></li>
      <li><a href="/whitepapers.html">White Papers</a></li>
      <li><a href="/business_plan.html">Business Plan</a></li>
      <li><a href="/merch.html">Merchandise</a></li>
      <li><a href="/wallet-ai-features.html">Wallet</a></li>
      <li><a href="/ai-assistant-demo.html">AI Assistant</a></li>
      <li><a href="/account-info.html">Account Info</a></li>
      <li><a href="/#join-section" class="join-button">Join</a></li>
    </ul>
    <div id="language-selector" class="language-selector"></div>
  </nav>
</header>

<style>
  /* Header Styles */
  .site-header {
    background: linear-gradient(to right, #F5F5F5, #FFFDF0);
    padding: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    position: relative;
    border-bottom: 3px solid #4caf50;
  }
  
  .logo-container {
    display: flex;
    align-items: center;
  }
  
  .logo-container a {
    display: flex;
    align-items: center;
    text-decoration: none;
    color: #00573B;
  }
  
  .logo-container picture,
  .logo-img {
    height: 50px;
    width: auto;
    margin-right: 1rem;
    display: block;
  }
  
  .logo-text {
    font-size: 1.2rem;
    font-weight: 700;
    line-height: 1.2;
    color: #00573B;
  }
  
  .main-nav {
    display: flex;
    align-items: center;
  }
  
  .nav-items {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
  }
  
  .nav-items li {
    margin-left: 1.5rem;
  }
  
  .nav-items a {
    color: #00573B;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s ease;
    padding: 0.5rem 0;
    position: relative;
  }
  
  .nav-items a:hover {
    color: #FFC107;
  }
  
  .nav-items a::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background-color: #FFC107;
    transition: width 0.3s ease;
  }
  
  .nav-items a:hover::after {
    width: 100%;
  }
  
  /* Special styling for Join button */
  .nav-items a.join-button {
    background-color: #4caf50;
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    transition: background-color 0.3s ease;
  }
  
  .nav-items a.join-button:hover {
    background-color: #45a049;
    color: white;
  }
  
  .nav-items a.join-button::after {
    display: none;
  }
  
  .mobile-menu-toggle {
    display: none;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
  }
  
  .mobile-menu-toggle .bar {
    display: block;
    width: 25px;
    height: 3px;
    background-color: #00573B;
    margin: 5px 0;
    transition: transform 0.3s ease, opacity 0.3s ease;
  }
  
  @media (max-width: 768px) {
    .mobile-menu-toggle {
      display: block;
    }
    
    .nav-items {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background-color: #FFFFFF;
      flex-direction: column;
      padding: 1rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      display: none;
      z-index: 100;
    }
    
    .nav-items.active {
      display: flex;
    }
    
    .nav-items li {
      margin: 0.5rem 0;
    }
  }
</style>

<script>
  // Mobile menu toggle functionality
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
    const navItems = document.querySelector('.nav-items');
    
    if (mobileMenuToggle && navItems) {
      mobileMenuToggle.addEventListener('click', function() {
        navItems.classList.toggle('active');
      });
    }
  });
</script>
  
  <main>
    <div class="container">
    <h1>The Current-See: AI Wallet Prototype</h1>
    <p class="sub">A live demonstration of our AI-powered, energy-conscious wallet system. Data is streaming in real time from our working prototype.</p>

    <div class="wallet-box">
      <div class="title">User 1 Wallet</div>
      <div id="wallet1">Loading...</div>
    </div>

    <div class="wallet-box">
      <div class="title">User 2 Wallet</div>
      <div id="wallet2">Loading...</div>
    </div>

    <div class="wallet-box">
      <div class="title">Most Recent Transfers</div>
      <div id="transfer-log-display" style="padding: 1rem; font-size: 0.9rem;">Loading...</div>
    </div>

    <div class="wallet-box">
      <div class="title">WalletWhisper: Sustainability Tip Preview</div>
      <p>"Consider switching to a reusable bottle. It saves ~0.2 kWh per use."</p>
      <div class="button-row">
        <button class="btn" onclick="walletWhisper('Consider switching to a reusable bottle. It saves 0.2 kilowatt-hours per use.')">Play Voice Tip</button>
      </div>
    </div>

    <div class="wallet-box button-row">
      <button class="btn" onclick="showAppStatus('Full AI Wallet')">Launch Full AI Wallet</button>
      <button class="btn" onclick="showAppStatus('2-Wallet Demo')">View 2-Wallet Demo</button>
      <a href="/signup.html" class="btn">Join the TC-S Network</a>
    </div>
    
    <div class="wallet-box" style="margin-top: 15px; font-size: 0.9rem; color: #666; text-align: center; padding: 10px; background-color: #f5f5f5; border-radius: 8px;">
      <p><strong>Note:</strong> The wallet app prototypes are currently in development and not publicly available yet. They will be enabled in the production version. In the meantime, you can explore the current solar generation data on the <a href="/solar-generator.html" style="color: #00aa88; font-weight: bold;">Solar Generator</a> page.</p>
    </div>
    
    <!-- Loading modal for the wallet apps -->
    <div id="loading-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center; flex-direction: column;">
      <div style="background-color: white; padding: 2rem; border-radius: 10px; text-align: center; max-width: 500px; width: 90%;">
        <h3 id="loading-title" style="margin-top: 0; color: #00aa88;">Starting Wallet App...</h3>
        <p>The wallet app is waking up and loading. This may take 10-15 seconds.</p>
        <div style="margin: 1.5rem 0; height: 6px; background-color: #f0f0f0; border-radius: 3px; overflow: hidden;">
          <div id="loading-progress" style="height: 100%; width: 0%; background-color: #00aa88; transition: width 0.5s;"></div>
        </div>
        <div id="loading-status">Initializing connection...</div>
      </div>
    </div>
    
    <div class="wallet-box" style="text-align: center; margin-top: 20px;">
      <a href="/index.html" class="btn" style="background-color: #7bc144; color: white; text-decoration: none; font-weight: bold; padding: 0.75rem 1.5rem; border-radius: 50px; display: inline-block;">Return to Home</a>
    </div>
  </div>

  <script>
    // Try multiple potential URLs in case one isn't working
    const backendUrls = [
      window.location.origin, // Use our own server first
      "https://cross-platform-mobile-tdfranklin101.replit.app",
      "https://crossplatformmobile.tdfrankl.repl.co",
      "https://crossplatformmobile.tdfrankl.replit.app"
    ];
    let backendBase = backendUrls[0]; // Start with our own server

    // Try all available backend URLs
    let currentUrlIndex = 0;
    let connectAttempts = 0;
    const maxAttempts = 3;
    
    // Mock data to display if all connection attempts fail
    const mockWalletData = {
      user1: { balance: 123.45 },
      user2: { balance: 67.89 }
    };
    
    const mockTransferData = [
      { from: "User1", to: "User2", amount: 10.0, timestamp: "2025-04-15T12:34:56Z" },
      { from: "User2", to: "User1", amount: 5.0, timestamp: "2025-04-15T10:30:00Z" },
      { from: "User1", to: "Admin", amount: 2.5, timestamp: "2025-04-14T15:45:22Z" }
    ];
    
    function tryNextBackendUrl() {
      currentUrlIndex = (currentUrlIndex + 1) % backendUrls.length;
      backendBase = backendUrls[currentUrlIndex];
      console.log(`Trying next backend URL: ${backendBase}`);
      connectAttempts++;
    }
    
    function loadWalletData() {
      fetch(`${backendBase}/wallets`)
        .then(res => {
          if (!res.ok) {
            throw new Error(`Network response was not ok: ${res.status}`);
          }
          // Reset attempts counter on success
          connectAttempts = 0;
          return res.json();
        })
        .then(data => {
          document.getElementById("wallet1").innerText = `${data.user1.balance.toFixed(2)} Solar`;
          document.getElementById("wallet2").innerText = `${data.user2.balance.toFixed(2)} Solar`;
          
          // Keep the fixed Full Demo URL - no need to update it
          // document.getElementById('launch-demo-btn').href = backendBase;
        })
        .catch(error => {
          console.error('Error loading wallet data:', error);
          
          // Try next URL if available and we haven't exhausted all attempts
          if (connectAttempts < maxAttempts) {
            tryNextBackendUrl();
            // Try again immediately with new URL
            loadWalletData();
            return;
          }
          
          // Display mock data if all connection attempts fail
          if (connectAttempts >= maxAttempts) {
            document.getElementById("wallet1").innerText = `${mockWalletData.user1.balance.toFixed(2)} Solar`;
            document.getElementById("wallet2").innerText = `${mockWalletData.user2.balance.toFixed(2)} Solar`;
          } else {
            document.getElementById("wallet1").innerText = `Error loading wallet data`;
            document.getElementById("wallet2").innerText = `Error loading wallet data`;
          }
        });
    }

    function loadTransferLog() {
      fetch(`${backendBase}/transfers`)
        .then(res => {
          if (!res.ok) {
            throw new Error(`Network response was not ok: ${res.status}`);
          }
          return res.json();
        })
        .then(data => {
          displayFormattedTransfers(data.slice(-5).reverse());
        })
        .catch(error => {
          console.error('Error loading transfer data:', error);
          
          // Display mock transfer data if all attempts fail
          if (connectAttempts >= maxAttempts) {
            displayFormattedTransfers(mockTransferData);
          } else {
            document.getElementById("transfer-log-display").innerHTML = `<div class="error">Error loading transfer data: Connection issue</div>`;
          }
        });
    }
    
    function displayFormattedTransfers(transfers) {
      const transfersElement = document.getElementById("transfer-log-display");
      transfersElement.innerHTML = '';
      
      if (!transfers || transfers.length === 0) {
        transfersElement.innerHTML = '<div style="color: #666; font-style: italic;">No transfers found</div>';
        return;
      }
      
      transfers.forEach(transfer => {
        const date = new Date(transfer.timestamp);
        const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        
        const transferItem = document.createElement('div');
        transferItem.style.marginBottom = '0.8rem';
        transferItem.style.borderBottom = '1px solid #eee';
        transferItem.style.paddingBottom = '0.8rem';
        
        transferItem.innerHTML = `
          <div style="display: flex; justify-content: space-between;">
            <div>
              <strong>${transfer.from}</strong> → <strong>${transfer.to}</strong>
            </div>
            <div style="font-weight: bold; color: #006655;">
              ${transfer.amount.toFixed(2)} Solar
            </div>
          </div>
          <div style="font-size: 0.8rem; color: #777; margin-top: 0.3rem;">
            ${formattedDate}
          </div>
        `;
        
        transfersElement.appendChild(transferItem);
      });
    }

    function walletWhisper(text) {
      const msg = new SpeechSynthesisUtterance(text);
      msg.pitch = 1.1;
      msg.rate = 1;
      window.speechSynthesis.speak(msg);
    }
    
    function showAppStatus(appName) {
      // Show simple notification that the app is in development
      const loadingModal = document.getElementById('loading-modal');
      const loadingTitle = document.getElementById('loading-title');
      const loadingStatus = document.getElementById('loading-status');
      
      loadingModal.style.display = 'flex';
      loadingTitle.textContent = `${appName} Development Status`;
      loadingStatus.innerHTML = `The ${appName} is currently in development and not publicly available.<br><br>
      This feature will be enabled in the production version.<br><br>
      <a href="/solar-generator.html" style="color: #00aa88; font-weight: bold;">Check out the Solar Generator</a> to see the current-see in action!`;
      
      // No progress bar needed
      document.getElementById('loading-progress').style.width = '0%';
    }

    setInterval(() => {
      loadWalletData();
      loadTransferLog();
    }, 3000);

    window.onload = () => {
      loadWalletData();
      loadTransferLog();
      
      // Setup shared elements
      const loadingModal = document.getElementById('loading-modal');
      const loadingTitle = document.getElementById('loading-title');
      const loadingProgress = document.getElementById('loading-progress');
      const loadingStatus = document.getElementById('loading-status');
      
      // Update the progress bar
      function updateProgress(percent) {
        loadingProgress.style.width = `${percent}%`;
      }
      
      // Common function to launch app with wake-up functionality
      function launchAppWithWakeup(appUrls, appName) {
        // Show loading modal
        loadingModal.style.display = 'flex';
        loadingTitle.textContent = `Starting ${appName}...`;
        
        let currentAppUrlIndex = 0;
        let pingAttempts = 0;
        const maxPingAttempts = 3;
        
        // Ping the app to wake it up
        function pingApp() {
          const currentAppUrl = appUrls[currentAppUrlIndex];
          updateProgress(15 + pingAttempts * 20);
          loadingStatus.textContent = `Waking up ${appName} (attempt ${pingAttempts + 1})...`;
          
          // First try a GET request to /ping
          fetch(`${currentAppUrl}/ping`, { method: 'GET' })
            .then(res => {
              if (res.ok) {
                // App is awake, redirect
                loadingStatus.textContent = `Success! Launching ${appName}...`;
                updateProgress(100);
                
                // Short delay before redirect for visual feedback
                setTimeout(() => {
                  window.open(currentAppUrl, '_blank');
                  loadingModal.style.display = 'none';
                  updateProgress(0);
                }, 1000);
              } else {
                throw new Error('App not ready yet with GET request');
              }
            })
            // If GET fails, try a POST request which sometimes works better for waking up Replit apps
            .catch(() => {
              loadingStatus.textContent = `Trying alternative wake method...`;
              
              return fetch(`${currentAppUrl}/`, { 
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ action: 'wake' })
              })
              .then(res => {
                // Any response here is good, means the app is responsive
                loadingStatus.textContent = `Success! Launching ${appName}...`;
                updateProgress(100);
                
                setTimeout(() => {
                  window.open(currentAppUrl, '_blank');
                  loadingModal.style.display = 'none';
                  updateProgress(0);
                }, 1000);
              })
              .catch(err => {
                throw new Error('App not ready after both GET and POST attempts');
              });
            })
            .catch(err => {
              pingAttempts++;
              
              if (pingAttempts >= maxPingAttempts) {
                // Try next URL
                currentAppUrlIndex++;
                pingAttempts = 0;
                
                if (currentAppUrlIndex >= appUrls.length) {
                  // All URLs failed, just attempt direct launch of first URL
                  loadingStatus.textContent = `Unable to wake app automatically. Launching ${appName} anyway...`;
                  updateProgress(100);
                  
                  setTimeout(() => {
                    window.open(appUrls[0], '_blank');
                    loadingModal.style.display = 'none';
                    updateProgress(0);
                  }, 2000);
                  
                  return;
                }
              }
              
              // Try again after a short delay
              setTimeout(pingApp, 1500);
            });
        }
        
        // Start the ping process
        pingApp();
      }
      // We no longer need to handle button clicks here
      // The direct links with target="_blank" will open in a new tab
      // without requiring any JavaScript intervention
      
      // Allow clicking outside the modal to close it
      loadingModal.addEventListener('click', function(e) {
        if (e.target === loadingModal) {
          loadingModal.style.display = 'none';
          loadingProgress.style.width = '0%';
        }
      });
    };
  </script>
  </main>
  
  <!-- Common Footer -->
<footer class="site-footer">
  <div class="footer-content">
    <div class="footer-section about">
      <h3>The Current-See</h3>
      <p>A revolutionary organization creating a solar-backed economic system for a more equitable world.</p>
      <p>The Current-See PBC, Inc.</p>
      <p><a href="mailto:hello@thecurrentsee.org">hello@thecurrentsee.org</a></p>
    </div>
    
    <div class="footer-section links">
      <h3>Quick Links</h3>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/declaration.html">Solar Declaration</a></li>
        <li><a href="/founder_note.html">Founder's Note</a></li>
        <li><a href="/whitepapers.html">White Papers</a></li>
        <li><a href="/wallet-ai-features.html">Wallet Features</a></li>
      </ul>
    </div>
    
    <div class="footer-section join">
      <h3>Join the Movement</h3>
      <ul>
        <li><a href="/contact-us.html">Contact Us</a></li>
        <li><a href="/#join-section">Sign Up</a></li>
        <li><a href="/wallet-ai-features.html">My Solar</a></li>
        <li><a href="/account-info.html">Account Information</a></li>
      </ul>
    </div>
  </div>
  
  <div class="footer-bottom">
    <p>&copy; 2025 The Current-See PBC, Inc. All rights reserved. <a href="/admin/member-roster.html" style="color: #333; font-size: 0.8em; margin-left: 15px; text-decoration: none;">Admin</a></p>
  </div>
</footer>

<!-- Hidden Google Translate Element -->
<div id="google_translate_element" style="display: none;"></div>

<!-- Language translator script -->
<script src="/js/language-translator-loader.js"></script>

<!-- Voice assistant script -->
<script src="/js/voice-assistant-loader.js"></script>

<style>
  /* Footer Styles */
  .site-footer {
    background-color: #333;
    color: #fff;
    padding: 2rem 0 0 0;
    font-size: 0.9rem;
  }
  
  .footer-content {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }
  
  .footer-section {
    flex: 1;
    margin: 0 1rem 2rem;
    min-width: 200px;
  }
  
  .footer-section h3 {
    color: #FFC107;
    margin-bottom: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 0.5rem;
    font-size: 1.2rem;
  }
  
  .footer-section p {
    line-height: 1.6;
    margin-bottom: 0.7rem;
  }
  
  .footer-section a {
    color: #ADB5BD;
    text-decoration: none;
    transition: color 0.3s ease;
  }
  
  .footer-section a:hover {
    color: #FFC107;
  }
  
  .footer-section ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .footer-section ul li {
    margin-bottom: 0.7rem;
  }
  
  .footer-bottom {
    background-color: #222;
    padding: 1rem 0;
    text-align: center;
    font-size: 0.8rem;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
  }
  
  .footer-bottom p {
    margin: 0;
  }
  
  @media (max-width: 768px) {
    .footer-content {
      flex-direction: column;
    }
    
    .footer-section {
      margin: 0 0 1.5rem;
    }
  }
</style>
  
  <!-- Language Translator -->
  <script src="/js/language-translator.js"></script>
  
  <!-- Page-specific scripts -->
  <script>
    // Try multiple potential URLs in case one isn't working
    const backendUrls = [
      window.location.origin, // Use our own server first
      "https://cross-platform-mobile-tdfranklin101.replit.app",
      "https://crossplatformmobile.tdfrankl.repl.co",
      "https://crossplatformmobile.tdfrankl.replit.app"
    ];
    let backendBase = backendUrls[0]; // Start with our own server

    // Try all available backend URLs
    let currentUrlIndex = 0;
    let connectAttempts = 0;
    const maxAttempts = 3;
    
    // Mock data to display if all connection attempts fail
    const mockWalletData = {
      user1: { balance: 123.45 },
      user2: { balance: 67.89 }
    };
    
    const mockTransferData = [
      { from: "User1", to: "User2", amount: 10.0, timestamp: "2025-04-15T12:34:56Z" },
      { from: "User2", to: "User1", amount: 5.0, timestamp: "2025-04-15T10:30:00Z" },
      { from: "User1", to: "Admin", amount: 2.5, timestamp: "2025-04-14T15:45:22Z" }
    ];
    
    function tryNextBackendUrl() {
      currentUrlIndex = (currentUrlIndex + 1) % backendUrls.length;
      backendBase = backendUrls[currentUrlIndex];
      console.log(`Trying next backend URL: ${backendBase}`);
      connectAttempts++;
    }
    
    function loadWalletData() {
      fetch(`${backendBase}/wallets`)
        .then(res => {
          if (!res.ok) {
            throw new Error(`Network response was not ok: ${res.status}`);
          }
          // Reset attempts counter on success
          connectAttempts = 0;
          return res.json();
        })
        .then(data => {
          document.getElementById("wallet1").innerText = `${data.user1.balance.toFixed(2)} Solar`;
          document.getElementById("wallet2").innerText = `${data.user2.balance.toFixed(2)} Solar`;
          
          // Keep the fixed Full Demo URL - no need to update it
          // document.getElementById('launch-demo-btn').href = backendBase;
        })
        .catch(error => {
          console.error('Error loading wallet data:', error);
          
          // Try next URL if available and we haven't exhausted all attempts
          if (connectAttempts < maxAttempts) {
            tryNextBackendUrl();
            // Try again immediately with new URL
            loadWalletData();
            return;
          }
          
          // Display mock data if all connection attempts fail
          if (connectAttempts >= maxAttempts) {
            document.getElementById("wallet1").innerText = `${mockWalletData.user1.balance.toFixed(2)} Solar`;
            document.getElementById("wallet2").innerText = `${mockWalletData.user2.balance.toFixed(2)} Solar`;
          } else {
            document.getElementById("wallet1").innerText = `Error loading wallet data`;
            document.getElementById("wallet2").innerText = `Error loading wallet data`;
          }
        });
    }

    function loadTransferLog() {
      fetch(`${backendBase}/transfers`)
        .then(res => {
          if (!res.ok) {
            throw new Error(`Network response was not ok: ${res.status}`);
          }
          return res.json();
        })
        .then(data => {
          displayFormattedTransfers(data.slice(-5).reverse());
        })
        .catch(error => {
          console.error('Error loading transfer data:', error);
          
          // Display mock transfer data if all attempts fail
          if (connectAttempts >= maxAttempts) {
            displayFormattedTransfers(mockTransferData);
          } else {
            document.getElementById("transfer-log-display").innerHTML = `<div class="error">Error loading transfer data: Connection issue</div>`;
          }
        });
    }
    
    function displayFormattedTransfers(transfers) {
      const transfersElement = document.getElementById("transfer-log-display");
      transfersElement.innerHTML = '';
      
      if (!transfers || transfers.length === 0) {
        transfersElement.innerHTML = '<div style="color: #666; font-style: italic;">No transfers found</div>';
        return;
      }
      
      transfers.forEach(transfer => {
        const date = new Date(transfer.timestamp);
        const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        
        const transferItem = document.createElement('div');
        transferItem.style.marginBottom = '0.8rem';
        transferItem.style.borderBottom = '1px solid #eee';
        transferItem.style.paddingBottom = '0.8rem';
        
        transferItem.innerHTML = `
          <div style="display: flex; justify-content: space-between;">
            <div>
              <strong>${transfer.from}</strong> → <strong>${transfer.to}</strong>
            </div>
            <div style="font-weight: bold; color: #006655;">
              ${transfer.amount.toFixed(2)} Solar
            </div>
          </div>
          <div style="font-size: 0.8rem; color: #777; margin-top: 0.3rem;">
            ${formattedDate}
          </div>
        `;
        
        transfersElement.appendChild(transferItem);
      });
    }

    function walletWhisper(text) {
      const msg = new SpeechSynthesisUtterance(text);
      msg.pitch = 1.1;
      msg.rate = 1;
      window.speechSynthesis.speak(msg);
    }
    
    function showAppStatus(appName) {
      // Show simple notification that the app is in development
      const loadingModal = document.getElementById('loading-modal');
      const loadingTitle = document.getElementById('loading-title');
      const loadingStatus = document.getElementById('loading-status');
      
      loadingModal.style.display = 'flex';
      loadingTitle.textContent = `${appName} Development Status`;
      loadingStatus.innerHTML = `The ${appName} is currently in development and not publicly available.<br><br>
      This feature will be enabled in the production version.<br><br>
      <a href="/solar-generator.html" style="color: #00aa88; font-weight: bold;">Check out the Solar Generator</a> to see the current-see in action!`;
      
      // No progress bar needed
      document.getElementById('loading-progress').style.width = '0%';
    }

    setInterval(() => {
      loadWalletData();
      loadTransferLog();
    }, 3000);

    window.onload = () => {
      loadWalletData();
      loadTransferLog();
      
      // Setup shared elements
      const loadingModal = document.getElementById('loading-modal');
      const loadingTitle = document.getElementById('loading-title');
      const loadingProgress = document.getElementById('loading-progress');
      const loadingStatus = document.getElementById('loading-status');
      
      // Update the progress bar
      function updateProgress(percent) {
        loadingProgress.style.width = `${percent}%`;
      }
      
      // Common function to launch app with wake-up functionality
      function launchAppWithWakeup(appUrls, appName) {
        // Show loading modal
        loadingModal.style.display = 'flex';
        loadingTitle.textContent = `Starting ${appName}...`;
        
        let currentAppUrlIndex = 0;
        let pingAttempts = 0;
        const maxPingAttempts = 3;
        
        // Ping the app to wake it up
        function pingApp() {
          const currentAppUrl = appUrls[currentAppUrlIndex];
          updateProgress(15 + pingAttempts * 20);
          loadingStatus.textContent = `Waking up ${appName} (attempt ${pingAttempts + 1})...`;
          
          // First try a GET request to /ping
          fetch(`${currentAppUrl}/ping`, { method: 'GET' })
            .then(res => {
              if (res.ok) {
                // App is awake, redirect
                loadingStatus.textContent = `Success! Launching ${appName}...`;
                updateProgress(100);
                
                // Short delay before redirect for visual feedback
                setTimeout(() => {
                  window.open(currentAppUrl, '_blank');
                  loadingModal.style.display = 'none';
                  updateProgress(0);
                }, 1000);
              } else {
                throw new Error('App not ready yet with GET request');
              }
            })
            // If GET fails, try a POST request which sometimes works better for waking up Replit apps
            .catch(() => {
              loadingStatus.textContent = `Trying alternative wake method...`;
              
              return fetch(`${currentAppUrl}/`, { 
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ action: 'wake' })
              })
              .then(res => {
                // Any response here is good, means the app is responsive
                loadingStatus.textContent = `Success! Launching ${appName}...`;
                updateProgress(100);
                
                setTimeout(() => {
                  window.open(currentAppUrl, '_blank');
                  loadingModal.style.display = 'none';
                  updateProgress(0);
                }, 1000);
              })
              .catch(err => {
                throw new Error('App not ready after both GET and POST attempts');
              });
            })
            .catch(err => {
              pingAttempts++;
              
              if (pingAttempts >= maxPingAttempts) {
                // Try next URL
                currentAppUrlIndex++;
                pingAttempts = 0;
                
                if (currentAppUrlIndex >= appUrls.length) {
                  // All URLs failed, just attempt direct launch of first URL
                  loadingStatus.textContent = `Unable to wake app automatically. Launching ${appName} anyway...`;
                  updateProgress(100);
                  
                  setTimeout(() => {
                    window.open(appUrls[0], '_blank');
                    loadingModal.style.display = 'none';
                    updateProgress(0);
                  }, 2000);
                  
                  return;
                }
              }
              
              // Try again after a short delay
              setTimeout(pingApp, 1500);
            });
        }
        
        // Start the ping process
        pingApp();
      }
      // We no longer need to handle button clicks here
      // The direct links with target="_blank" will open in a new tab
      // without requiring any JavaScript intervention
      
      // Allow clicking outside the modal to close it
      loadingModal.addEventListener('click', function(e) {
        if (e.target === loadingModal) {
          loadingModal.style.display = 'none';
          loadingProgress.style.width = '0%';
        }
      });
    };
  </script>
  </main>
  
  <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Current-See</title>
  
  <!-- SEO Meta Tags -->
  
  
  <!-- Common Styles -->
  <link rel="stylesheet" href="/css/common.css">
  <link rel="stylesheet" href="/css/components/language-selector.css">
  
  <!-- Page-specific styles -->
  
</head>
<body>
  <!-- Common Header -->
<header class="site-header">
  <div class="logo-container">
    <a href="/">
      <picture>
        <source srcset="/img/solar-logo.svg" type="image/svg+xml">
        <img src="/img/solar-logo.png" alt="The Current-See Logo" class="logo-img">
      </picture>
      <div class="logo-text">The Current-See<br>PBC, Inc.</div>
    </a>
  </div>
  <nav class="main-nav">
    <button class="mobile-menu-toggle" aria-label="Toggle navigation menu">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>
    <ul class="nav-items">
      <li><a href="/">Home</a></li>
      <li><a href="/prototype.html">Prototype</a></li>
      <li><a href="/wallet-ai-features.html">My Solar</a></li>
      <li><a href="/declaration.html">Solar Declaration</a></li>
      <li><a href="/founder_note.html">Founder's Note</a></li>
      <li><a href="/whitepapers.html">White Papers</a></li>
      <li><a href="/business_plan.html">Business Plan</a></li>
      <li><a href="/merch.html">Merchandise</a></li>
      <li><a href="/wallet-ai-features.html">Wallet</a></li>
      <li><a href="/ai-assistant-demo.html">AI Assistant</a></li>
      <li><a href="/account-info.html">Account Info</a></li>
      <li><a href="/#join-section" class="join-button">Join</a></li>
    </ul>
    <div id="language-selector" class="language-selector"></div>
  </nav>
</header>

<style>
  /* Header Styles */
  .site-header {
    background: linear-gradient(to right, #F5F5F5, #FFFDF0);
    padding: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    position: relative;
    border-bottom: 3px solid #4caf50;
  }
  
  .logo-container {
    display: flex;
    align-items: center;
  }
  
  .logo-container a {
    display: flex;
    align-items: center;
    text-decoration: none;
    color: #00573B;
  }
  
  .logo-container picture,
  .logo-img {
    height: 50px;
    width: auto;
    margin-right: 1rem;
    display: block;
  }
  
  .logo-text {
    font-size: 1.2rem;
    font-weight: 700;
    line-height: 1.2;
    color: #00573B;
  }
  
  .main-nav {
    display: flex;
    align-items: center;
  }
  
  .nav-items {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
  }
  
  .nav-items li {
    margin-left: 1.5rem;
  }
  
  .nav-items a {
    color: #00573B;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s ease;
    padding: 0.5rem 0;
    position: relative;
  }
  
  .nav-items a:hover {
    color: #FFC107;
  }
  
  .nav-items a::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background-color: #FFC107;
    transition: width 0.3s ease;
  }
  
  .nav-items a:hover::after {
    width: 100%;
  }
  
  /* Special styling for Join button */
  .nav-items a.join-button {
    background-color: #4caf50;
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    transition: background-color 0.3s ease;
  }
  
  .nav-items a.join-button:hover {
    background-color: #45a049;
    color: white;
  }
  
  .nav-items a.join-button::after {
    display: none;
  }
  
  .mobile-menu-toggle {
    display: none;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
  }
  
  .mobile-menu-toggle .bar {
    display: block;
    width: 25px;
    height: 3px;
    background-color: #00573B;
    margin: 5px 0;
    transition: transform 0.3s ease, opacity 0.3s ease;
  }
  
  @media (max-width: 768px) {
    .mobile-menu-toggle {
      display: block;
    }
    
    .nav-items {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background-color: #FFFFFF;
      flex-direction: column;
      padding: 1rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      display: none;
      z-index: 100;
    }
    
    .nav-items.active {
      display: flex;
    }
    
    .nav-items li {
      margin: 0.5rem 0;
    }
  }
</style>

<script>
  // Mobile menu toggle functionality
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
    const navItems = document.querySelector('.nav-items');
    
    if (mobileMenuToggle && navItems) {
      mobileMenuToggle.addEventListener('click', function() {
        navItems.classList.toggle('active');
      });
    }
  });
</script>
  
  <main>
    <!-- Common Footer -->
<footer class="site-footer">
  <div class="footer-content">
    <div class="footer-section about">
      <h3>The Current-See</h3>
      <p>A revolutionary organization creating a solar-backed economic system for a more equitable world.</p>
      <p>The Current-See PBC, Inc.</p>
      <p><a href="mailto:hello@thecurrentsee.org">hello@thecurrentsee.org</a></p>
    </div>
    
    <div class="footer-section links">
      <h3>Quick Links</h3>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/declaration.html">Solar Declaration</a></li>
        <li><a href="/founder_note.html">Founder's Note</a></li>
        <li><a href="/whitepapers.html">White Papers</a></li>
        <li><a href="/wallet-ai-features.html">Wallet Features</a></li>
      </ul>
    </div>
    
    <div class="footer-section join">
      <h3>Join the Movement</h3>
      <ul>
        <li><a href="/contact-us.html">Contact Us</a></li>
        <li><a href="/#join-section">Sign Up</a></li>
        <li><a href="/wallet-ai-features.html">My Solar</a></li>
        <li><a href="/account-info.html">Account Information</a></li>
      </ul>
    </div>
  </div>
  
  <div class="footer-bottom">
    <p>&copy; 2025 The Current-See PBC, Inc. All rights reserved. <a href="/admin/member-roster.html" style="color: #333; font-size: 0.8em; margin-left: 15px; text-decoration: none;">Admin</a></p>
  </div>
</footer>

<!-- Hidden Google Translate Element -->
<div id="google_translate_element" style="display: none;"></div>

<!-- Language translator script -->
<script src="/js/language-translator-loader.js"></script>

<!-- Voice assistant script -->
<script src="/js/voice-assistant-loader.js"></script>

<style>
  /* Footer Styles */
  .site-footer {
    background-color: #333;
    color: #fff;
    padding: 2rem 0 0 0;
    font-size: 0.9rem;
  }
  
  .footer-content {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }
  
  .footer-section {
    flex: 1;
    margin: 0 1rem 2rem;
    min-width: 200px;
  }
  
  .footer-section h3 {
    color: #FFC107;
    margin-bottom: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 0.5rem;
    font-size: 1.2rem;
  }
  
  .footer-section p {
    line-height: 1.6;
    margin-bottom: 0.7rem;
  }
  
  .footer-section a {
    color: #ADB5BD;
    text-decoration: none;
    transition: color 0.3s ease;
  }
  
  .footer-section a:hover {
    color: #FFC107;
  }
  
  .footer-section ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .footer-section ul li {
    margin-bottom: 0.7rem;
  }
  
  .footer-bottom {
    background-color: #222;
    padding: 1rem 0;
    text-align: center;
    font-size: 0.8rem;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
  }
  
  .footer-bottom p {
    margin: 0;
  }
  
  @media (max-width: 768px) {
    .footer-content {
      flex-direction: column;
    }
    
    .footer-section {
      margin: 0 0 1.5rem;
    }
  }
</style>
  </main>
  
  <!-- Common Footer -->
<footer class="site-footer">
  <div class="footer-content">
    <div class="footer-section about">
      <h3>The Current-See</h3>
      <p>A revolutionary organization creating a solar-backed economic system for a more equitable world.</p>
      <p>The Current-See PBC, Inc.</p>
      <p><a href="mailto:hello@thecurrentsee.org">hello@thecurrentsee.org</a></p>
    </div>
    
    <div class="footer-section links">
      <h3>Quick Links</h3>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/declaration.html">Solar Declaration</a></li>
        <li><a href="/founder_note.html">Founder's Note</a></li>
        <li><a href="/whitepapers.html">White Papers</a></li>
        <li><a href="/wallet-ai-features.html">Wallet Features</a></li>
      </ul>
    </div>
    
    <div class="footer-section join">
      <h3>Join the Movement</h3>
      <ul>
        <li><a href="/contact-us.html">Contact Us</a></li>
        <li><a href="/#join-section">Sign Up</a></li>
        <li><a href="/wallet-ai-features.html">My Solar</a></li>
        <li><a href="/account-info.html">Account Information</a></li>
      </ul>
    </div>
  </div>
  
  <div class="footer-bottom">
    <p>&copy; 2025 The Current-See PBC, Inc. All rights reserved. <a href="/admin/member-roster.html" style="color: #333; font-size: 0.8em; margin-left: 15px; text-decoration: none;">Admin</a></p>
  </div>
</footer>

<!-- Hidden Google Translate Element -->
<div id="google_translate_element" style="display: none;"></div>

<!-- Language translator script -->
<script src="/js/language-translator-loader.js"></script>

<!-- Voice assistant script -->
<script src="/js/voice-assistant-loader.js"></script>

<style>
  /* Footer Styles */
  .site-footer {
    background-color: #333;
    color: #fff;
    padding: 2rem 0 0 0;
    font-size: 0.9rem;
  }
  
  .footer-content {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }
  
  .footer-section {
    flex: 1;
    margin: 0 1rem 2rem;
    min-width: 200px;
  }
  
  .footer-section h3 {
    color: #FFC107;
    margin-bottom: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 0.5rem;
    font-size: 1.2rem;
  }
  
  .footer-section p {
    line-height: 1.6;
    margin-bottom: 0.7rem;
  }
  
  .footer-section a {
    color: #ADB5BD;
    text-decoration: none;
    transition: color 0.3s ease;
  }
  
  .footer-section a:hover {
    color: #FFC107;
  }
  
  .footer-section ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .footer-section ul li {
    margin-bottom: 0.7rem;
  }
  
  .footer-bottom {
    background-color: #222;
    padding: 1rem 0;
    text-align: center;
    font-size: 0.8rem;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
  }
  
  .footer-bottom p {
    margin: 0;
  }
  
  @media (max-width: 768px) {
    .footer-content {
      flex-direction: column;
    }
    
    .footer-section {
      margin: 0 0 1.5rem;
    }
  }
</style>
  
  <!-- Language Translator -->
  <script src="/js/language-translator.js"></script>
  
  <!-- Page-specific scripts -->
  <script src="/js/language-translator-loader.js"></script>
<script src="/js/voice-assistant-loader.js"></script>

</body>
</html>
  
  <!-- Language Translator -->
  <script src="/js/language-translator.js"></script>
  
  <!-- Page-specific scripts -->
  <script>
  // Mobile menu toggle functionality
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
    const navItems = document.querySelector('.nav-items');
    
    if (mobileMenuToggle && navItems) {
      mobileMenuToggle.addEventListener('click', function() {
        navItems.classList.toggle('active');
      });
    }
  });
</script>
<script>
    // Try multiple potential URLs in case one isn't working
    const backendUrls = [
      window.location.origin, // Use our own server first
      "https://cross-platform-mobile-tdfranklin101.replit.app",
      "https://crossplatformmobile.tdfrankl.repl.co",
      "https://crossplatformmobile.tdfrankl.replit.app"
    ];
    let backendBase = backendUrls[0]; // Start with our own server

    // Try all available backend URLs
    let currentUrlIndex = 0;
    let connectAttempts = 0;
    const maxAttempts = 3;
    
    // Mock data to display if all connection attempts fail
    const mockWalletData = {
      user1: { balance: 123.45 },
      user2: { balance: 67.89 }
    };
    
    const mockTransferData = [
      { from: "User1", to: "User2", amount: 10.0, timestamp: "2025-04-15T12:34:56Z" },
      { from: "User2", to: "User1", amount: 5.0, timestamp: "2025-04-15T10:30:00Z" },
      { from: "User1", to: "Admin", amount: 2.5, timestamp: "2025-04-14T15:45:22Z" }
    ];
    
    function tryNextBackendUrl() {
      currentUrlIndex = (currentUrlIndex + 1) % backendUrls.length;
      backendBase = backendUrls[currentUrlIndex];
      console.log(`Trying next backend URL: ${backendBase}`);
      connectAttempts++;
    }
    
    function loadWalletData() {
      fetch(`${backendBase}/wallets`)
        .then(res => {
          if (!res.ok) {
            throw new Error(`Network response was not ok: ${res.status}`);
          }
          // Reset attempts counter on success
          connectAttempts = 0;
          return res.json();
        })
        .then(data => {
          document.getElementById("wallet1").innerText = `${data.user1.balance.toFixed(2)} Solar`;
          document.getElementById("wallet2").innerText = `${data.user2.balance.toFixed(2)} Solar`;
          
          // Keep the fixed Full Demo URL - no need to update it
          // document.getElementById('launch-demo-btn').href = backendBase;
        })
        .catch(error => {
          console.error('Error loading wallet data:', error);
          
          // Try next URL if available and we haven't exhausted all attempts
          if (connectAttempts < maxAttempts) {
            tryNextBackendUrl();
            // Try again immediately with new URL
            loadWalletData();
            return;
          }
          
          // Display mock data if all connection attempts fail
          if (connectAttempts >= maxAttempts) {
            document.getElementById("wallet1").innerText = `${mockWalletData.user1.balance.toFixed(2)} Solar`;
            document.getElementById("wallet2").innerText = `${mockWalletData.user2.balance.toFixed(2)} Solar`;
          } else {
            document.getElementById("wallet1").innerText = `Error loading wallet data`;
            document.getElementById("wallet2").innerText = `Error loading wallet data`;
          }
        });
    }

    function loadTransferLog() {
      fetch(`${backendBase}/transfers`)
        .then(res => {
          if (!res.ok) {
            throw new Error(`Network response was not ok: ${res.status}`);
          }
          return res.json();
        })
        .then(data => {
          displayFormattedTransfers(data.slice(-5).reverse());
        })
        .catch(error => {
          console.error('Error loading transfer data:', error);
          
          // Display mock transfer data if all attempts fail
          if (connectAttempts >= maxAttempts) {
            displayFormattedTransfers(mockTransferData);
          } else {
            document.getElementById("transfer-log-display").innerHTML = `<div class="error">Error loading transfer data: Connection issue</div>`;
          }
        });
    }
    
    function displayFormattedTransfers(transfers) {
      const transfersElement = document.getElementById("transfer-log-display");
      transfersElement.innerHTML = '';
      
      if (!transfers || transfers.length === 0) {
        transfersElement.innerHTML = '<div style="color: #666; font-style: italic;">No transfers found</div>';
        return;
      }
      
      transfers.forEach(transfer => {
        const date = new Date(transfer.timestamp);
        const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        
        const transferItem = document.createElement('div');
        transferItem.style.marginBottom = '0.8rem';
        transferItem.style.borderBottom = '1px solid #eee';
        transferItem.style.paddingBottom = '0.8rem';
        
        transferItem.innerHTML = `
          <div style="display: flex; justify-content: space-between;">
            <div>
              <strong>${transfer.from}</strong> → <strong>${transfer.to}</strong>
            </div>
            <div style="font-weight: bold; color: #006655;">
              ${transfer.amount.toFixed(2)} Solar
            </div>
          </div>
          <div style="font-size: 0.8rem; color: #777; margin-top: 0.3rem;">
            ${formattedDate}
          </div>
        `;
        
        transfersElement.appendChild(transferItem);
      });
    }

    function walletWhisper(text) {
      const msg = new SpeechSynthesisUtterance(text);
      msg.pitch = 1.1;
      msg.rate = 1;
      window.speechSynthesis.speak(msg);
    }
    
    function showAppStatus(appName) {
      // Show simple notification that the app is in development
      const loadingModal = document.getElementById('loading-modal');
      const loadingTitle = document.getElementById('loading-title');
      const loadingStatus = document.getElementById('loading-status');
      
      loadingModal.style.display = 'flex';
      loadingTitle.textContent = `${appName} Development Status`;
      loadingStatus.innerHTML = `The ${appName} is currently in development and not publicly available.<br><br>
      This feature will be enabled in the production version.<br><br>
      <a href="/solar-generator.html" style="color: #00aa88; font-weight: bold;">Check out the Solar Generator</a> to see the current-see in action!`;
      
      // No progress bar needed
      document.getElementById('loading-progress').style.width = '0%';
    }

    setInterval(() => {
      loadWalletData();
      loadTransferLog();
    }, 3000);

    window.onload = () => {
      loadWalletData();
      loadTransferLog();
      
      // Setup shared elements
      const loadingModal = document.getElementById('loading-modal');
      const loadingTitle = document.getElementById('loading-title');
      const loadingProgress = document.getElementById('loading-progress');
      const loadingStatus = document.getElementById('loading-status');
      
      // Update the progress bar
      function updateProgress(percent) {
        loadingProgress.style.width = `${percent}%`;
      }
      
      // Common function to launch app with wake-up functionality
      function launchAppWithWakeup(appUrls, appName) {
        // Show loading modal
        loadingModal.style.display = 'flex';
        loadingTitle.textContent = `Starting ${appName}...`;
        
        let currentAppUrlIndex = 0;
        let pingAttempts = 0;
        const maxPingAttempts = 3;
        
        // Ping the app to wake it up
        function pingApp() {
          const currentAppUrl = appUrls[currentAppUrlIndex];
          updateProgress(15 + pingAttempts * 20);
          loadingStatus.textContent = `Waking up ${appName} (attempt ${pingAttempts + 1})...`;
          
          // First try a GET request to /ping
          fetch(`${currentAppUrl}/ping`, { method: 'GET' })
            .then(res => {
              if (res.ok) {
                // App is awake, redirect
                loadingStatus.textContent = `Success! Launching ${appName}...`;
                updateProgress(100);
                
                // Short delay before redirect for visual feedback
                setTimeout(() => {
                  window.open(currentAppUrl, '_blank');
                  loadingModal.style.display = 'none';
                  updateProgress(0);
                }, 1000);
              } else {
                throw new Error('App not ready yet with GET request');
              }
            })
            // If GET fails, try a POST request which sometimes works better for waking up Replit apps
            .catch(() => {
              loadingStatus.textContent = `Trying alternative wake method...`;
              
              return fetch(`${currentAppUrl}/`, { 
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ action: 'wake' })
              })
              .then(res => {
                // Any response here is good, means the app is responsive
                loadingStatus.textContent = `Success! Launching ${appName}...`;
                updateProgress(100);
                
                setTimeout(() => {
                  window.open(currentAppUrl, '_blank');
                  loadingModal.style.display = 'none';
                  updateProgress(0);
                }, 1000);
              })
              .catch(err => {
                throw new Error('App not ready after both GET and POST attempts');
              });
            })
            .catch(err => {
              pingAttempts++;
              
              if (pingAttempts >= maxPingAttempts) {
                // Try next URL
                currentAppUrlIndex++;
                pingAttempts = 0;
                
                if (currentAppUrlIndex >= appUrls.length) {
                  // All URLs failed, just attempt direct launch of first URL
                  loadingStatus.textContent = `Unable to wake app automatically. Launching ${appName} anyway...`;
                  updateProgress(100);
                  
                  setTimeout(() => {
                    window.open(appUrls[0], '_blank');
                    loadingModal.style.display = 'none';
                    updateProgress(0);
                  }, 2000);
                  
                  return;
                }
              }
              
              // Try again after a short delay
              setTimeout(pingApp, 1500);
            });
        }
        
        // Start the ping process
        pingApp();
      }
      // We no longer need to handle button clicks here
      // The direct links with target="_blank" will open in a new tab
      // without requiring any JavaScript intervention
      
      // Allow clicking outside the modal to close it
      loadingModal.addEventListener('click', function(e) {
        if (e.target === loadingModal) {
          loadingModal.style.display = 'none';
          loadingProgress.style.width = '0%';
        }
      });
    };
  </script>
<script src="/js/language-translator-loader.js"></script>
<script src="/js/voice-assistant-loader.js"></script>
<script>
    // Try multiple potential URLs in case one isn't working
    const backendUrls = [
      window.location.origin, // Use our own server first
      "https://cross-platform-mobile-tdfranklin101.replit.app",
      "https://crossplatformmobile.tdfrankl.repl.co",
      "https://crossplatformmobile.tdfrankl.replit.app"
    ];
    let backendBase = backendUrls[0]; // Start with our own server

    // Try all available backend URLs
    let currentUrlIndex = 0;
    let connectAttempts = 0;
    const maxAttempts = 3;
    
    // Mock data to display if all connection attempts fail
    const mockWalletData = {
      user1: { balance: 123.45 },
      user2: { balance: 67.89 }
    };
    
    const mockTransferData = [
      { from: "User1", to: "User2", amount: 10.0, timestamp: "2025-04-15T12:34:56Z" },
      { from: "User2", to: "User1", amount: 5.0, timestamp: "2025-04-15T10:30:00Z" },
      { from: "User1", to: "Admin", amount: 2.5, timestamp: "2025-04-14T15:45:22Z" }
    ];
    
    function tryNextBackendUrl() {
      currentUrlIndex = (currentUrlIndex + 1) % backendUrls.length;
      backendBase = backendUrls[currentUrlIndex];
      console.log(`Trying next backend URL: ${backendBase}`);
      connectAttempts++;
    }
    
    function loadWalletData() {
      fetch(`${backendBase}/wallets`)
        .then(res => {
          if (!res.ok) {
            throw new Error(`Network response was not ok: ${res.status}`);
          }
          // Reset attempts counter on success
          connectAttempts = 0;
          return res.json();
        })
        .then(data => {
          document.getElementById("wallet1").innerText = `${data.user1.balance.toFixed(2)} Solar`;
          document.getElementById("wallet2").innerText = `${data.user2.balance.toFixed(2)} Solar`;
          
          // Keep the fixed Full Demo URL - no need to update it
          // document.getElementById('launch-demo-btn').href = backendBase;
        })
        .catch(error => {
          console.error('Error loading wallet data:', error);
          
          // Try next URL if available and we haven't exhausted all attempts
          if (connectAttempts < maxAttempts) {
            tryNextBackendUrl();
            // Try again immediately with new URL
            loadWalletData();
            return;
          }
          
          // Display mock data if all connection attempts fail
          if (connectAttempts >= maxAttempts) {
            document.getElementById("wallet1").innerText = `${mockWalletData.user1.balance.toFixed(2)} Solar`;
            document.getElementById("wallet2").innerText = `${mockWalletData.user2.balance.toFixed(2)} Solar`;
          } else {
            document.getElementById("wallet1").innerText = `Error loading wallet data`;
            document.getElementById("wallet2").innerText = `Error loading wallet data`;
          }
        });
    }

    function loadTransferLog() {
      fetch(`${backendBase}/transfers`)
        .then(res => {
          if (!res.ok) {
            throw new Error(`Network response was not ok: ${res.status}`);
          }
          return res.json();
        })
        .then(data => {
          displayFormattedTransfers(data.slice(-5).reverse());
        })
        .catch(error => {
          console.error('Error loading transfer data:', error);
          
          // Display mock transfer data if all attempts fail
          if (connectAttempts >= maxAttempts) {
            displayFormattedTransfers(mockTransferData);
          } else {
            document.getElementById("transfer-log-display").innerHTML = `<div class="error">Error loading transfer data: Connection issue</div>`;
          }
        });
    }
    
    function displayFormattedTransfers(transfers) {
      const transfersElement = document.getElementById("transfer-log-display");
      transfersElement.innerHTML = '';
      
      if (!transfers || transfers.length === 0) {
        transfersElement.innerHTML = '<div style="color: #666; font-style: italic;">No transfers found</div>';
        return;
      }
      
      transfers.forEach(transfer => {
        const date = new Date(transfer.timestamp);
        const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        
        const transferItem = document.createElement('div');
        transferItem.style.marginBottom = '0.8rem';
        transferItem.style.borderBottom = '1px solid #eee';
        transferItem.style.paddingBottom = '0.8rem';
        
        transferItem.innerHTML = `
          <div style="display: flex; justify-content: space-between;">
            <div>
              <strong>${transfer.from}</strong> → <strong>${transfer.to}</strong>
            </div>
            <div style="font-weight: bold; color: #006655;">
              ${transfer.amount.toFixed(2)} Solar
            </div>
          </div>
          <div style="font-size: 0.8rem; color: #777; margin-top: 0.3rem;">
            ${formattedDate}
          </div>
        `;
        
        transfersElement.appendChild(transferItem);
      });
    }

    function walletWhisper(text) {
      const msg = new SpeechSynthesisUtterance(text);
      msg.pitch = 1.1;
      msg.rate = 1;
      window.speechSynthesis.speak(msg);
    }
    
    function showAppStatus(appName) {
      // Show simple notification that the app is in development
      const loadingModal = document.getElementById('loading-modal');
      const loadingTitle = document.getElementById('loading-title');
      const loadingStatus = document.getElementById('loading-status');
      
      loadingModal.style.display = 'flex';
      loadingTitle.textContent = `${appName} Development Status`;
      loadingStatus.innerHTML = `The ${appName} is currently in development and not publicly available.<br><br>
      This feature will be enabled in the production version.<br><br>
      <a href="/solar-generator.html" style="color: #00aa88; font-weight: bold;">Check out the Solar Generator</a> to see the current-see in action!`;
      
      // No progress bar needed
      document.getElementById('loading-progress').style.width = '0%';
    }

    setInterval(() => {
      loadWalletData();
      loadTransferLog();
    }, 3000);

    window.onload = () => {
      loadWalletData();
      loadTransferLog();
      
      // Setup shared elements
      const loadingModal = document.getElementById('loading-modal');
      const loadingTitle = document.getElementById('loading-title');
      const loadingProgress = document.getElementById('loading-progress');
      const loadingStatus = document.getElementById('loading-status');
      
      // Update the progress bar
      function updateProgress(percent) {
        loadingProgress.style.width = `${percent}%`;
      }
      
      // Common function to launch app with wake-up functionality
      function launchAppWithWakeup(appUrls, appName) {
        // Show loading modal
        loadingModal.style.display = 'flex';
        loadingTitle.textContent = `Starting ${appName}...`;
        
        let currentAppUrlIndex = 0;
        let pingAttempts = 0;
        const maxPingAttempts = 3;
        
        // Ping the app to wake it up
        function pingApp() {
          const currentAppUrl = appUrls[currentAppUrlIndex];
          updateProgress(15 + pingAttempts * 20);
          loadingStatus.textContent = `Waking up ${appName} (attempt ${pingAttempts + 1})...`;
          
          // First try a GET request to /ping
          fetch(`${currentAppUrl}/ping`, { method: 'GET' })
            .then(res => {
              if (res.ok) {
                // App is awake, redirect
                loadingStatus.textContent = `Success! Launching ${appName}...`;
                updateProgress(100);
                
                // Short delay before redirect for visual feedback
                setTimeout(() => {
                  window.open(currentAppUrl, '_blank');
                  loadingModal.style.display = 'none';
                  updateProgress(0);
                }, 1000);
              } else {
                throw new Error('App not ready yet with GET request');
              }
            })
            // If GET fails, try a POST request which sometimes works better for waking up Replit apps
            .catch(() => {
              loadingStatus.textContent = `Trying alternative wake method...`;
              
              return fetch(`${currentAppUrl}/`, { 
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ action: 'wake' })
              })
              .then(res => {
                // Any response here is good, means the app is responsive
                loadingStatus.textContent = `Success! Launching ${appName}...`;
                updateProgress(100);
                
                setTimeout(() => {
                  window.open(currentAppUrl, '_blank');
                  loadingModal.style.display = 'none';
                  updateProgress(0);
                }, 1000);
              })
              .catch(err => {
                throw new Error('App not ready after both GET and POST attempts');
              });
            })
            .catch(err => {
              pingAttempts++;
              
              if (pingAttempts >= maxPingAttempts) {
                // Try next URL
                currentAppUrlIndex++;
                pingAttempts = 0;
                
                if (currentAppUrlIndex >= appUrls.length) {
                  // All URLs failed, just attempt direct launch of first URL
                  loadingStatus.textContent = `Unable to wake app automatically. Launching ${appName} anyway...`;
                  updateProgress(100);
                  
                  setTimeout(() => {
                    window.open(appUrls[0], '_blank');
                    loadingModal.style.display = 'none';
                    updateProgress(0);
                  }, 2000);
                  
                  return;
                }
              }
              
              // Try again after a short delay
              setTimeout(pingApp, 1500);
            });
        }
        
        // Start the ping process
        pingApp();
      }
      // We no longer need to handle button clicks here
      // The direct links with target="_blank" will open in a new tab
      // without requiring any JavaScript intervention
      
      // Allow clicking outside the modal to close it
      loadingModal.addEventListener('click', function(e) {
        if (e.target === loadingModal) {
          loadingModal.style.display = 'none';
          loadingProgress.style.width = '0%';
        }
      });
    };
  </script>

</body>
</html>