<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Test</title>
</head>
<body>
    <h1>Audio Test</h1>
    <div>
        <p>Audio file size: 54.6MB</p>
        <button id="testBtn">Test Audio Load</button>
        <div id="status"></div>
    </div>
    
    <audio controls preload="none" id="audioTest">
        <source src="/audio/The Current-See_ Solar Energy for Universal Basic Income_1752340053171.wav" type="audio/wav">
        Your browser does not support the audio element.
    </audio>
    
    <script>
        // Test direct file access
        fetch('/audio/The Current-See_ Solar Energy for Universal Basic Income_1752340053171.wav', {method: 'HEAD'})
            .then(r => console.log('File check result:', r.status, r.headers))
            .catch(e => console.error('File check failed:', e));
            
        // Simple test play button
        const testPlayBtn = document.createElement('button');
        testPlayBtn.textContent = 'Direct Play Test';
        testPlayBtn.onclick = () => {
            const audio = document.getElementById('audioTest');
            audio.play().catch(e => console.error('Direct play failed:', e));
        };
        document.body.appendChild(testPlayBtn);
    </script>
    
    <script>
        const audio = document.getElementById('audioTest');
        const status = document.getElementById('status');
        const testBtn = document.getElementById('testBtn');
        
        function updateStatus(msg) {
            status.innerHTML += msg + '<br>';
            console.log(msg);
        }
        
        testBtn.addEventListener('click', () => {
            updateStatus('Testing audio load...');
            audio.load();
        });
        
        audio.addEventListener('loadstart', () => updateStatus('✓ Audio load started'));
        audio.addEventListener('canplaythrough', () => updateStatus('✓ Audio can play through'));
        audio.addEventListener('error', (e) => {
            updateStatus('✗ Audio error: ' + e.target.error.message);
            console.error('Audio error:', e);
        });
        audio.addEventListener('play', () => updateStatus('✓ Audio playing'));
        audio.addEventListener('pause', () => updateStatus('Audio paused'));
        audio.addEventListener('loadedmetadata', () => {
            updateStatus('✓ Metadata loaded - Duration: ' + audio.duration + 's');
        });
    </script>
</body>
</html>